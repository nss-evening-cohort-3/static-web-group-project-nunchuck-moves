YUI.add("hermes-template-global-nav",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-signup">\n				<a data-track="gnSignupClick" class="gn-title butt" href="/signup">',s={hash:{intlName:"common.SIGN_UP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function d(e,t){var r="",i,s,o;r+='\n			<li role="menuitem" data-context="you">\n				<a data-track="gnYouMainClick" class="gn-title you" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===c?i.apply(e):i))+'" aria-haspopup="true">',o={hash:{intlName:"common.YOU"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a class="server-only-link" data-track="gnYouCameraRollClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'<span class="label-beta">',o={hash:{intlName:"common.BETA"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</span></a></li>\n					<li class="menuitem"><a data-track="gnYouPhotostreamClick" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouSetsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.albums),typeof i===c?i.apply(e):i))+'">',s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.set_not_album),{hash:{},inverse:h.program(6,m,t),fn:h.program(4,v,t),data:t});if(s||s===0)r+=s;r+='</a></li>\n					<li class="menuitem"><a data-track="gnYouMapClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.map),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouFavoritesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.favorites),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.FAVORITES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouGalleriesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.galleries),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouRecentActivityClick" href="/activity">',o={hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.stats),{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(s||s===0)r+=s;return r+='\n					<li class="menuitem"><a data-track="gnYouOrganizeClick" href="/photos/organize">',o={hash:{intlName:"global-nav.ORGANIZE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a class="server-only-link" data-track="gnYouCreationsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.creations),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CREATIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n				</ul>\n			</li>\n		",r}function v(e,t){var r,i;return i={hash:{intlName:"common.SETS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function m(e,t){var r,i;return i={hash:{intlName:"common.ALBUMS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function g(e,t){var r="",i,s;return r+='<li class="menuitem"><a data-track="gnYouStatsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.stats),typeof i===c?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.STATS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function y(e,t){var r="",i,s;return r+='\n			<li class="toplink">\n				<a data-track="gnYouMainClick" class="gn-link" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.photostream),typeof i===c?i.apply(e):i))+'"><span>',s={hash:{intlName:"global-nav.YOUR_PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</span></a>\n			</li>\n		",r}function b(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="contacts">\n				<a data-track="gnContactsMainClick" class="gn-title contacts" href="/photos/friends" aria-haspopup="true">',s={hash:{intlName:"global-nav.PEOPLE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnContactsRecentPhotosClick" href="/photos/friends">',s={hash:{intlName:"global-nav.PHOTOS_FROM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsPhotosOfContactsClick" href="/photosof/contacts">',s={hash:{intlName:"global-nav.PHOTOS_OF"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsContactListClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.list),typeof i===c?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.LIST"},data:t},r+=l((i=
n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsAddContactsClick" href="/import/people">',s={hash:{intlName:"global-nav.FIND_FRIENDS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>\n				</ul>\n			</li>\n		",r}function w(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="groups">\n				<a data-track="gnGroupsMainClick" class="gn-title groups" href="/groups" aria-haspopup="true">',s={hash:{intlName:"global-nav.GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnGroupsGroupsListClick" href="/groups">',s={hash:{intlName:"global-nav.GROUPS_LIST"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsRecentDiscussionsClick" href="/recent.gne">',s={hash:{intlName:"global-nav.RECENT_DISCUSSIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsCreateAGroupClick" href="/groups_create.gne">',s={hash:{intlName:"global-nav.CREATE_A_GROUP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>\n				</ul>\n			</li>\n		",r}function E(e,t){var r="",i,s,o;r+='\n			<li role="menuitem" data-context="explore">\n				<a data-track="gnExploreMainClick" class="gn-title explore" href="/explore" aria-haspopup="true">',o={hash:{intlName:"common.EXPLORE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li role="menuitem"><a data-track="gnExploreRecentPhotosClick" href="/explore">',o={hash:{intlName:"global-nav.RECENT_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreTheCommonsClick" href="/commons">',o={hash:{intlName:"global-nav.THE_COMMONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",s=n["if"].call(e,e.enableVRLanding,{hash:{},inverse:h.noop,fn:h.program(17,S,t),data:t});if(s||s===0)r+=s;r+='\n					<li role="menuitem"><a data-track="gnExplore20under20Click" href="/20under20">20under20</a></li>\n					<li role="menuitem"><a data-track="gnExploreGalleriesClick" href="/galleries">',o={hash:{intlName:"global-nav.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreWorldMapClick" href="/map">',o={hash:{intlName:"global-nav.WORLD_MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreAppGardenClick" href="/services">',o={hash:{intlName:"global-nav.APP_GARDEN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreCameraFinderClick" href="/cameras">',o={hash:{intlName:"global-nav.CAMERA_FINDER"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.weekly_flickr),{hash:{},inverse:h.noop,fn:h.program(19,x,t),data:t});if(s||s===0)r+=s;return r+='\n					<li role="menuitem"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">',o={hash:{intlName:"global-nav.FLICKR_BLOG"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n				</ul>\n			</li>\n		",r}function S(e,t){return'\n						<li role="menuitem"><a data-track="gnExploreVRLandingClick" href="/vr">Flickr VR</a></li>\n					'}function x(e,t){var r="",i,s;return r+='<li role="menuitem"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">',s={hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function T(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-create">\n				<a data-track="gnCreateMainClick" class="gn-title" href="/create">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function N(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="create">\n				<a data-track="gnCreateMainClick" class="gn-title create" href="/create" aria-haspopup="true">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<!-- <li class="menuitem"><a data-track="gnCreateFooClick" href="/foo">',s={hash:{intlName:"global-nav.FOO"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li> -->\n				</ul>\n			</li>\n		",r}function C(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-upload">\n				<a data-track="gnUploadMain" class="gn-title" href="/upload">',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function k(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e.showAutosuggest,{hash:{},inverse:h.program(30,A,t),fn:h.program(28,L,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function L(e,t){var r="",i,s;return r+='\n				<li role="menuitem">\n					',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["autosuggest-view"],s):f.call(e,"outlet",e["autosuggest-view"],s)))+"\n				</li>\n			",r}function A(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.showSmartSearchBar,{hash:{},inverse:h.program(33,M,t),fn:h.program(31,O,t),data:t}
);if(i||i===0)r+=i;return r+="\n			",r}function O(e,t){var r="",i,s;return r+='\n					<li role="menuitem">\n						',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["search-bar-view"],s):f.call(e,"outlet",e["search-bar-view"],s)))+"\n					</li>\n				",r}function M(e,t){var r="",i,s;return r+='\n					<li role="menuitem">\n						<form method="get" role="search">\n							<input type="text" name="text" value="',(i=n.searchValue)?i=i.call(e,{hash:{},data:t}):(i=e.searchValue,i=typeof i===c?i.apply(e):i),r+=l(i)+'" id="gn-search-field" autocomplete="off" aria-label="Search" role="textbox">\n							<input type="submit" data-track="gnSearchSearchIcon" class="search-icon" tabindex="-1" aria-label="',s={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'" role="button">\n						</form>\n					</li>\n				',r}function _(e,t){var r="",i,s;return r+='\n			<li role="menuitem">\n				',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["notifications-menu-view"],s):f.call(e,"outlet",e["notifications-menu-view"],s)))+"\n			</li>\n		",r}function D(e,t){var r="",i,s;return r+='\n			<li role="menuitem">\n				',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["account-menu-view"],s):f.call(e,"outlet",e["account-menu-view"],s)))+"\n			</li>\n		",r}function P(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-signin">\n				<a data-track="gnSignin" class="gn-title" href="/signin">',s={hash:{intlName:"global-nav.SIGN_IN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function H(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["browser-upgrade-banner-view"],s):f.call(e,"outlet",e["browser-upgrade-banner-view"],s)))+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["mobile-app-upsell-view"],a):f.call(t,"outlet",t["mobile-app-upsell-view"],a)))+'\n\n<div class="global-nav-old">\n<div class="global-nav-shim"></div>\n<div class="global-nav-content styleguide-global-nav fluid">\n	<a href="/" class="main-logo" data-track="gnLogoClick" title="',a={hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):f.call(t,"intlMessage",a)))+'"></a>\n\n	<ul class="nav-menu" role="menubar">\n\n		',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signup_link),{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_menu),{hash:{},inverse:h.noop,fn:h.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_link),{hash:{},inverse:h.noop,fn:h.program(10,y,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.contacts_menu),{hash:{},inverse:h.noop,fn:h.program(12,b,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.groups_menu),{hash:{},inverse:h.noop,fn:h.program(14,w,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.explore_menu),{hash:{},inverse:h.noop,fn:h.program(16,E,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_link),{hash:{},inverse:h.noop,fn:h.program(21,T,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_menu),{hash:{},inverse:h.noop,fn:h.program(23,N,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_link),{hash:{},inverse:h.noop,fn:h.program(25,C,i),data:i});if(u||u===0)s+=u;s+='\n	</ul>\n\n	<ul class="gn-tools">\n		',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.search_bar),{hash:{},inverse:h.noop,fn:h.program(27,k,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,t.showNotificationsMenu,{hash:{},inverse:h.noop,fn:h.program(35,_,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.account_menu),{hash:{},inverse:h.noop,fn:h.program(37,D,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signin_link),{hash:{},inverse:h.noop,fn:h.program(39,P,i),data:i});if(u||u===0)s+=u;s+="\n	</ul>\n</div>\n\n",u=n["if"].call(t,t["show-browser-upgrade-banner"],{hash:{},inverse:h.noop,fn:h.program(41,H,i),data:i});if(u||u===0)s+=u;return s+="\n\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["person-menu-view"],a):f.call(t,"outlet",t["person-menu-view"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["group-menu-view"],a):f.call(t,"outlet",t["group-menu-view"],a)))+"\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-global-nav-restyle",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s;r+="\n			",s=n.unless.call(e,(i=e.elements,i==null||i===!1?i:i.right_side_signup),{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});if(s||s===0)r+=s;return r+="\n			",r}function d(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-signup">\n					<a data-track="gnSignupClick" class="gn-title butt" href="/signup">',s={hash:{intlName:"common.SIGN_UP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function v(e,t){var r="",i,s,o;r+='\n				<li role="menuitem" data-context="you">\n					<a data-track="gnYouMainClick" class="gn-title you" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'" aria-haspopup="true">',o={hash:{intlName:"common.YOU"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n					<ul class="gn-submenu" role="menu">\n						<li class="menuitem"><a data-track="gnYouCameraRollClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'<span class="label-beta">',o={hash:{intlName:"common.BETA"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</span></a></li>\n						<li class="menuitem"><a data-track="gnYouPhotostreamClick" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouSetsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.albums),typeof i===h?i.apply(e):i))+'">',s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.set_not_album),{hash:{},inverse:c.program(7,g,t),fn:c.program(5,m,t),data:t});if(s||s===0)r+=s;r+='</a></li>\n						<li class="menuitem"><a data-track="gnYouFavoritesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.favorites),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.FAVORITES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouGroupsClick" href="/groups">',o={hash:{intlName:"global-nav.GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouGalleriesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.galleries),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouCreationsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.creations),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CREATIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouPeopleClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.people),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.PEOPLE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouRecentActivityClick" href="/activity">',o={hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n						",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.stats),{hash:{},inverse:c.noop,fn:c.program(9,y,t),data:t});if(s||s===0)r+=s;return r+='\n						<li class="menuitem"><a data-track="gnYouOrganizeClick" href="/photos/organize">',o={hash:{intlName:"global-nav.ORGANIZE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					</ul>\n				</li>\n			",r}function m(e,t){var r,i;return i={hash:{intlName:"common.SETS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function g(e,t){var r,i;return i={hash:{intlName:"common.ALBUMS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function y(e,t){var r="",i,s;return r+='<li class="menuitem"><a data-track="gnYouStatsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.stats),typeof i===h?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.STATS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function b(e,t){var r="",i,s;return r+='\n				<li class="toplink">\n					<a data-track="gnYouMainClick" class="gn-link" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'"><span>',s={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</span></a>\n				</li>\n			",r}function w(e,t){var r="",i,s,o;r+='\n				<li role="menuitem" data-context="explore">\n					<a data-track="gnExploreMainClick" class="gn-title explore" href="/explore" aria-haspopup="true">',o={hash:{intlName:"common.EXPLORE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n					<ul class="gn-submenu" role="menu">\n						<li role="menuitem"><a data-track="gnExploreRecentPhotosClick" href="/explore">',o={hash:{intlName:"global-nav.RECENT_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n						",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.show_tags_menu_link
),{hash:{},inverse:c.noop,fn:c.program(14,E,t),data:t});if(s||s===0)r+=s;r+="\n						",s=n["if"].call(e,e.enableVRLanding,{hash:{},inverse:c.noop,fn:c.program(16,S,t),data:t});if(s||s===0)r+=s;r+='\n						<li role="menuitem"><a data-track="gnExploreTheCommonsClick" href="/commons">',o={hash:{intlName:"global-nav.THE_COMMONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExplore20under20Click" href="/20under20">20under20</a></li>\n						<li role="menuitem"><a data-track="gnExploreGalleriesClick" href="/galleries">',o={hash:{intlName:"global-nav.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExploreWorldMapClick" href="/map">',o={hash:{intlName:"global-nav.WORLD_MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExploreAppGardenClick" href="/services">',o={hash:{intlName:"global-nav.APP_GARDEN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExploreCameraFinderClick" href="/cameras">',o={hash:{intlName:"global-nav.CAMERA_FINDER"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n						",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.weekly_flickr),{hash:{},inverse:c.noop,fn:c.program(18,x,t),data:t});if(s||s===0)r+=s;return r+='\n						<li role="menuitem"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">',o={hash:{intlName:"global-nav.FLICKR_BLOG"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					</ul>\n				</li>\n			",r}function E(e,t){var r="",i,s;return r+='\n							<li role="menuitem"><a data-track="gnExploreTagsClick" href="/photos/tags">',s={hash:{intlName:"common.TRENDING"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'<span class="label-beta">',s={hash:{intlName:"common.NEW"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</span></a></li>\n						",r}function S(e,t){return'\n							<li role="menuitem"><a data-track="gnExploreVRLandingClick" href="/vr">Flickr VR</a></li>\n						'}function x(e,t){var r="",i,s;return r+='<li role="menuitem"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">',s={hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function T(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-create">\n					<a data-track="gnCreateMainClick" class="gn-title" href="/create">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function N(e,t){var r="",i,s;return r+='\n				<li role="menuitem" data-context="create">\n					<a data-track="gnCreateMainClick" class="gn-title create" href="/create" aria-haspopup="true">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n					<ul class="gn-submenu" role="menu">\n						<!-- <li class="menuitem"><a data-track="gnCreateFooClick" href="/foo">',s={hash:{intlName:"global-nav.FOO"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li> -->\n					</ul>\n				</li>\n			",r}function C(e,t){return" with-upload-icon"}function k(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-upload">\n					<a data-track="gnUploadMain" class="gn-title" href="/upload">',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function L(e,t){var r="",i;r+='\n				<li role="menuitem" class="gn-search-box">\n\n					<svg class="icon icon-search mobile-search-button"><use xlink:href="#icon-search"></use></svg>\n\n					',i=n["if"].call(e,e.enableNewAutosugest,{hash:{},inverse:c.program(31,O,t),fn:c.program(29,A,t),data:t});if(i||i===0)r+=i;return r+='\n\n					<svg class="mobile-search-close-button"><use xlink:href="#icon-close"></use></svg>\n\n				</li>\n			',r}function A(e,t){var r="",i,s;return r+="\n							",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["search-autosuggest-field-view"],s):f.call(e,"outlet",e["search-autosuggest-field-view"],s)))+"\n					",r}function O(e,t){var r="",i;r+="\n						",i=n["if"].call(e,e.showSmartSearchBar,{hash:{},inverse:c.program(34,_,t),fn:c.program(32,M,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function M(e,t){var r="",i,s;return r+="\n							",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["search-bar-view"],s):f.call(e,"outlet",e["search-bar-view"],s)))+"\n						",r}function _(e,t){var r="",i,s,o;return r+='\n							<form method="get" role="search">\n								<input type="text" placeholder="',o={hash:{intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'" name="text" value="',(s=n.searchValue)?s=s.call(e,{hash:{},data:t}):(s=e.searchValue,s=typeof s===h?s.apply(e):s),r+=l(s)+'" id="gn-search-field" autocomplete="off" aria-label="Search" role="textbox">\n								<label data-track="gnSearchSearchIcon" aria-label="',o={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'">\n									'+'\n									<svg class="search-icon" style="width: 22px; height: 22px;" data-track="gnSearchSearchIcon" aria-label="',o={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'"><use xlink:href="#icon-search"></use></svg>\n\n									<input type="submit" data-track="gnSearchSearchIcon" class="search-icon-button" tabindex="-1" aria-label="'
,o={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'" role="button">\n								</label>\n							</form>\n						',r}function D(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-upload">\n					<a data-track="gnUploadIconMain" class="gn-title" href="/upload"><i class="upload-icon" title="',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'">',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</i></a>\n				</li>\n			",r}function P(e,t){var r="",i,s;return r+='\n				<li role="menuitem">\n					',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["notifications-menu-view"],s):f.call(e,"outlet",e["notifications-menu-view"],s)))+"\n				</li>\n			",r}function H(e,t){var r="",i,s;return r+='\n				<li role="menuitem">\n					',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["account-menu-view"],s):f.call(e,"outlet",e["account-menu-view"],s)))+"\n				</li>\n			",r}function B(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-signin">\n					<a data-track="gnSignin" class="gn-title" href="/signin">',s={hash:{intlName:"global-nav.SIGN_IN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function j(e,t){var r="",i,s;r+="\n			",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.right_side_signup),{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});if(s||s===0)r+=s;return r+="\n			",r}function F(e,t){return"extended"}function I(e,t){var r="",i,s,o;r+='\n				<div class="mobile-nav-column">\n					<div class="mobile-nav-menu-item mobile-nav-menu-title">',o={hash:{intlName:"common.YOU"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouCameraRollClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'<span class="label-beta">',o={hash:{intlName:"common.BETA"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</span></a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouPhotostreamClick" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouSetsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.albums),typeof i===h?i.apply(e):i))+'">',s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.set_not_album),{hash:{},inverse:c.program(7,g,t),fn:c.program(5,m,t),data:t});if(s||s===0)r+=s;r+='</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouFavoritesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.favorites),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.FAVORITES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouGalleriesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.galleries),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouGroupsClick" href="/groups">',o={hash:{intlName:"global-nav.GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.stats),{hash:{},inverse:c.noop,fn:c.program(49,q,t),data:t});if(s||s===0)r+=s;return r+="\n				</div>\n			",r}function q(e,t){var r="",i,s;return r+='<div class="mobile-nav-menu-item"><a data-track="gnYouStatsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.stats),typeof i===h?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.STATS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></div>",r}function R(e,t){var r="",i,s,o;r+='\n				<div class="mobile-nav-column">\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreMainClick" class="explore" href="/explore" aria-haspopup="true">',o={hash:{intlName:"common.EXPLORE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreRecentPhotosClick" href="/explore">',o={hash:{intlName:"global-nav.RECENT_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.show_tags_menu_link),{hash:{},inverse:c.noop,fn:c.program(52,U,t),data:t});if(s||s===0)r+=s;r+='\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreTheCommonsClick" href="/commons">',o={hash:{intlName:"global-nav.THE_COMMONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExplore20under20Click" href="/20under20">20under20</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreGalleriesClick" href="/galleries">',o={hash:{intlName:"global-nav.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.weekly_flickr),{hash:{},inverse:c.noop,fn:c.program(54,z,t),data:t});if(s||s===0)r+=s;return r+='\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'
,o={hash:{intlName:"global-nav.FLICKR_BLOG"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n				</div>\n			",r}function U(e,t){var r="",i,s;return r+='\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreTagsClick" href="/photos/tags">',s={hash:{intlName:"common.TRENDING"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'<span class="label-beta">',s={hash:{intlName:"common.NEW"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</span></a></div>\n					",r}function z(e,t){var r="",i,s;return r+='<div class="mobile-nav-menu-item"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">',s={hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></div>",r}function W(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["browser-upgrade-banner-view"],s):f.call(e,"outlet",e["browser-upgrade-banner-view"],s)))+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["mobile-app-upsell-view"],a):f.call(t,"outlet",t["mobile-app-upsell-view"],a)))+'\n\n<div class="global-nav-restyle">\n<div class="global-nav-shim"></div>\n<div class="global-nav-content styleguide-global-nav fluid sohp-mobile-navable">\n	<div class="global-nav-container fluid-centered">\n\n\n		<div class="mobile-nav-toggle"><span></span></div>\n\n		<div class="flickr-logo-container">\n			<a href="https://www.flickr.com" class="main-logo" data-track="gnLogoClick" title="',a={hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):f.call(t,"intlMessage",a)))+'"><svg class="icon-flickr"><use xlink:href="#icon-flickr_logo"></use></svg></a>\n		</div>\n\n		<ul class="nav-menu" role="menubar">\n			',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signup_link),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_menu),{hash:{},inverse:c.noop,fn:c.program(4,v,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_link),{hash:{},inverse:c.noop,fn:c.program(11,b,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.explore_menu),{hash:{},inverse:c.noop,fn:c.program(13,w,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_link),{hash:{},inverse:c.noop,fn:c.program(20,T,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_menu),{hash:{},inverse:c.noop,fn:c.program(22,N,i),data:i});if(u||u===0)s+=u;s+='\n\n		</ul>\n\n		<ul class="gn-tools',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_icon),{hash:{},inverse:c.noop,fn:c.program(24,C,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_link),{hash:{},inverse:c.noop,fn:c.program(26,k,i),data:i});if(u||u===0)s+=u;s+="\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.search_bar),{hash:{},inverse:c.noop,fn:c.program(28,L,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_icon),{hash:{},inverse:c.noop,fn:c.program(36,D,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,t.showNotificationsMenu,{hash:{},inverse:c.noop,fn:c.program(38,P,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.account_menu),{hash:{},inverse:c.noop,fn:c.program(40,H,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signin_link),{hash:{},inverse:c.noop,fn:c.program(42,B,i),data:i});if(u||u===0)s+=u;s+="\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signup_link),{hash:{},inverse:c.noop,fn:c.program(44,j,i),data:i});if(u||u===0)s+=u;s+='\n		</ul>\n\n\n		<div class="mobile-nav ',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.show_tags_menu_link),{hash:{},inverse:c.noop,fn:c.program(46,F,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_menu),{hash:{},inverse:c.noop,fn:c.program(48,I,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.explore_menu),{hash:{},inverse:c.noop,fn:c.program(51,R,i),data:i});if(u||u===0)s+=u;s+="\n		</div>\n	</div>\n</div>\n\n",u=n["if"].call(t,t["show-browser-upgrade-banner"],{hash:{},inverse:c.noop,fn:c.program(56,W,i),data:i});if(u||u===0)s+=u;return s+="\n\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["person-menu-view"],a):f.call(t,"outlet",t["person-menu-view"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["group-menu-view"],a):f.call(t,"outlet",t["group-menu-view"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["signup-rail-view"],a):f.call(t,"outlet",t["signup-rail-view"],a)))+"\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav-restyle",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-search-pill",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+='\n<li class="search-pill" ',i=n["if"].call(e,e.id,{hash:{},inverse:f.noop,fn:f.program(2,h,t),data:t});if(i||i===0)r+=i;return r+=">",o={hash:{},data:t},r+=a((i=n.truncate||e.truncate,i?i.call(e,e.name,20,o):l.call(e,"truncate",e.name,20,o)))+'<div class="search-pill-divider"></div>',(s=n.secondName)?s=s.call(e,{hash:{},data:t}):(s=e.secondName,s=typeof s===u?s.apply(e):s),r+=a(s)+'<i class="search-pill-remover"></i></li>\n',r}function h(e,t){var r="",i;return r+="id=",(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i),r}function p(e,t){var r="",i,s;r+='\n<li class="search-pill" ',i=n["if"].call(e,e.id,{hash:{},inverse:f.noop,fn:f.program(2,h,t),data:t});if(i||i===0)r+=i;return r+=">",s={hash:{},data:t},r+=a((i=n.truncate||e.truncate,i?i.call(e,e.name,30,s):l.call(e,"truncate",e.name,30,s)))+'<i class="search-pill-remover"></i></li>\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;o=n["if"].call(t,t.combo,{hash:{},inverse:f.program(4,p,i),fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-pill",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-search-autosuggest-field",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function d(e,t){var i="",s;i+="\n			",s=f.invokePartial(r["search-pill"],"search-pill",e,n,r,t);if(s||s===0)i+=s;return i+="\n		",i}function v(e,t){var r="",i,s;return r+=' placeholder="',s={hash:{intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'"',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression,h="function",p=n.blockHelperMissing;s+='<form method="get" action="/search/" role="search" class="search-form">\n\n		<label data-track="gnSearchSearchIcon" aria-label="',a={hash:{intlName:"search.SEARCH"},data:i},s+=c((o=n.intlMessage||t.intlMessage,o?o.call(t,a):l.call(t,"intlMessage",a)))+'">\n			'+'\n			<svg class="search-icon" style="width: 22px; height: 22px;" data-track="gnSearchSearchIcon" aria-label="',a={hash:{intlName:"search.SEARCH"},data:i},s+=c((o=n.intlMessage||t.intlMessage,o?o.call(t,a):l.call(t,"intlMessage",a)))+'"><use xlink:href="#icon-search"></use></svg>\n			<input type="submit" data-track="gnSearchSearchIcon" class="search-icon-button" tabindex="-1" aria-label="',a={hash:{intlName:"search.SEARCH"},data:i},s+=c((o=n.intlMessage||t.intlMessage,o?o.call(t,a):l.call(t,"intlMessage",a)))+'" role="button">\n		</label>\n		<ul class="search-pillbox">\n		',a={hash:{},inverse:f.noop,fn:f.program(1,d,i),data:i},(u=n.pills)?u=u.call(t,a):(u=t.pills,u=typeof u===h?u.apply(t):u),n.pills||(u=p.call(t,u,a));if(u||u===0)s+=u;s+='\n		</ul>\n		<input type="text" id="search-field" class="autosuggest-selectable-item"',u=n.unless.call(t,t.hasPills,{hash:{},inverse:f.noop,fn:f.program(3,v,i),data:i});if(u||u===0)s+=u;return s+=' name="text" value="',(u=n.searchTerm)?u=u.call(t,{hash:{},data:i}):(u=t.searchTerm,u=typeof u===h?u.apply(t):u),s+=c(u)+'" autocomplete="off" aria-label="',a={hash:{intlName:"search.SEARCH"},data:i},s+=c((o=n.intlMessage||t.intlMessage,o?o.call(t,a):l.call(t,"intlMessage",a)))+'" role="textbox">\n\n</form>\n\n',a={hash:{},data:i},s+=c((o=n.outlet||t.outlet,o?o.call(t,t["search-autosuggest-items-list-view"],a):l.call(t,"outlet",t["search-autosuggest-items-list-view"],a)))+"\n",s}),r={};e.Array.each(["search-pill"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-autosuggest-field",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-search-pill"]});
YUI.add("hermes-lang-autosuggest",function(e,t){e.Intl.add("hermes/autosuggest","en-US",{MEMBER:["1 member"],MEMBERS:[{type:"number",valueName:"count"}," members"],SEARCH_PEOPLE:["Search people"],SEARCH_GROUPS:["Search groups"],SEARCH_PHOTOS:["Search photos"],MORE:["More"],MORE_SEARCH_TYPES:["More search types"],MORE_OPTIONS:["More options"],SEARCH_YOUR_PHOTOS:["Search your photos"],SEARCH_EVERYONES_PHOTOS:["Search everyone's photos"],SEARCH_CONTACTS_PHOTOS:["Search your contacts' photos"],YOUR_PHOTOS:["Your photos"],EVERYONES_PHOTOS:["Everyone's photos"],YOUR_CONTACTS_PHOTOS:["Your contacts' photos"],SEARCH_USER_PHOTOS:["Search ","${name}","'s photos"],SEARCH_GROUP_PHOTOS:["Search photos in ","${name}"],YOUR_PHOTOSTREAM:["Your photostream"],YOUR_ALBUMS:["Your albums"],SETS:["Sets"],CAMERA_ROLL:["Camera roll"],ORGANIZE:["Organize"],YOUR_COLLECTIONS:["Your collections"],YOUR_GALLERIES:["Your galleries"],YOUR_ARCHIVES:["Your archives"],YOUR_TAGS:["Your tags"],YOUR_MAP:["Your map"],YOUR_FAVORITES:["Your favorites"],YOUR_STATS:["Your stats"],GRAPHS:["Graphs"],REFERRERS:["Referrers"],VIEWS:["Views"],YOUR_APPS:["Your apps"],RECENT_ACTIVITY:["Recent activity"],PHOTOS_OF_YOU:["Photos of you"],UPLOAD_PHOTOS:["Upload photos"],YOUR_ACCOUNT:["Your account"],SETTINGS:["Settings"],PREFERENCES:["Preferences"],YOUR_PROFILE:["Your profile"],FLICKR_MAIL:["Flickr mail"],ORGANIZR:["Organizr"],CREATE:["Create"],WALL_ART:["Wall art"],PHOTO_BOOKS:["Photo books"],CURATED_COLLECTION:["Curated collection"],PHOTOS_OF_YOUR_CONTACTS:["Photos of your contacts"],FOLLOWING:["Following"],CONTACTS_LIST:["Contacts list"],FOLLOWERS:["Followers"],FIND_YOUR_FRIENDS:["Find your friends"],INVITE_YOUR_FRIENDS:["Invite your friends"],INVITE_HISTORY:["Invite history"],GUEST_PASS_HISTORY:["Guest pass history"],YOUR_GROUPS:["Your groups"],RECENT_GROUP_DISCUSSIONS:["Recent group discussions"],CREATE_A_GROUP:["Create a group"],EXPLORE:["Explore"],POPULAR_TAGS:["Popular tags"],GALLERIES:["Galleries"],ANALOG:["Analog"],FILM:["Film"],WORLD_MAP:["World map"],PLACES:["Places"],THE_COMMONS:["The Commons"],CREATIVE_COMMONS:["Creative Commons"],CC:["CC"],LICENSE:["License"],THE_FLICKR_BLOG:["The Flickr Blog"],THE_FLICKR_CODE_BLOG:["The Flickr Code Blog"],THE_APP_GARDEN:["The App Garden"],CAMERA_FINDER:["Camera finder"],DEVELOPER_GUIDE:["Developer guide"],API:["API"],PROGRAMMING:["Programming"],CODE:["Code"],DOCUMENTATION:["Documentation"],DEVELOPER:["Developer"],API_DOCUMENTATION:["API documentation"],FEEDS:["Feeds"],RSS:["RSS"],ATOM:["Atom"],DATA:["Data"],HELP:["Help"],COMMUNITY_GUIDELINES:["Community guidelines"],HELP_FORUM:["Help forum"],FAQ:["FAQ"],FREQUENTLY_ASKED_QUESTIONS:["Frequently asked questions"],TOOLS:["Tools"],UPLOAD:["Upload"],MAC:["Mac"],WINDOWS:["Windows"],ABOUT_FLICKR:["About Flickr"],STAFF:["Staff"],JOBS_AT_FLICKR:["Jobs at Flickr"],CAREER:["Career"],TWENTY_UNDER_TWENTY:["20 Under 20"],ME:["Me"],FLICKR_MARKETPLACE:["Flickr Marketplace"]})},"@VERSION@",{requires:["intl"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("text-data-accentfold",function(e,t){e.namespace("Text.Data").AccentFold={0:/[\u2070\u2080\u24EA\uFF10]/gi,1:/[\u00B9\u2081\u2460\uFF11]/gi,2:/[\u00B2\u2082\u2461\uFF12]/gi,3:/[\u00B3\u2083\u2462\uFF13]/gi,4:/[\u2074\u2084\u2463\uFF14]/gi,5:/[\u2075\u2085\u2464\uFF15]/gi,6:/[\u2076\u2086\u2465\uFF16]/gi,7:/[\u2077\u2087\u2466\uFF17]/gi,8:/[\u2078\u2088\u2467\uFF18]/gi,9:/[\u2079\u2089\u2468\uFF19]/gi,a:/[\u00AA\u00E0-\u00E5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u1D43\u1E01\u1E9A\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u24D0\uFF41]/gi,b:/[\u1D47\u1E03\u1E05\u1E07\u24D1\uFF42]/gi,c:/[\u00E7\u0107\u0109\u010B\u010D\u1D9C\u1E09\u24D2\uFF43]/gi,d:/[\u010F\u1D48\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u217E\u24D3\uFF44]/gi,e:/[\u00E8-\u00EB\u0113\u0115\u0117\u0119\u011B\u0205\u0207\u0229\u1D49\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u2091\u212F\u24D4\uFF45]/gi,f:/[\u1DA0\u1E1F\u24D5\uFF46]/gi,g:/[\u011D\u011F\u0121\u0123\u01E7\u01F5\u1D4D\u1E21\u210A\u24D6\uFF47]/gi,h:/[\u0125\u021F\u02B0\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E96\u210E\u24D7\uFF48]/gi,i:/[\u00EC-\u00EF\u0129\u012B\u012D\u012F\u0133\u01D0\u0209\u020B\u1D62\u1E2D\u1E2F\u1EC9\u1ECB\u2071\u2139\u2170\u24D8\uFF49]/gi,j:/[\u0135\u01F0\u02B2\u24D9\u2C7C\uFF4A]/gi,k:/[\u0137\u01E9\u1D4F\u1E31\u1E33\u1E35\u24DA\uFF4B]/gi,l:/[\u013A\u013C\u013E\u0140\u01C9\u02E1\u1E37\u1E39\u1E3B\u1E3D\u2113\u217C\u24DB\uFF4C]/gi,m:/[\u1D50\u1E3F\u1E41\u1E43\u217F\u24DC\uFF4D]/gi,n:/[\u00F1\u0144\u0146\u0148\u01F9\u1E45\u1E47\u1E49\u1E4B\u207F\u24DD\uFF4E]/gi,o:/[\u00BA\u00F2-\u00F6\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u020D\u020F\u022B\u022D\u022F\u0231\u1D52\u1E4D\u1E4F\u1E51\u1E53\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u2092\u2134\u24DE\uFF4F]/gi,p:/[\u1D56\u1E55\u1E57\u24DF\uFF50]/gi,q:/[\u02A0\u24E0\uFF51]/gi,r:/[\u0155\u0157\u0159\u0211\u0213\u02B3\u1D63\u1E59\u1E5B\u1E5D\u1E5F\u24E1\uFF52]/gi,s:/[\u015B\u015D\u015F\u0161\u017F\u0219\u02E2\u1E61\u1E63\u1E65\u1E67\u1E69\u1E9B\u24E2\uFF53]/gi,t:/[\u0163\u0165\u021B\u1D57\u1E6B\u1E6D\u1E6F\u1E71\u1E97\u24E3\uFF54]/gi,u:/[\u00F9-\u00FC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u1D58\u1D64\u1E73\u1E75\u1E77\u1E79\u1E7B\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u24E4\uFF55]/gi,v:/[\u1D5B\u1D65\u1E7D\u1E7F\u2174\u24E5\uFF56]/gi,w:/[\u0175\u02B7\u1E81\u1E83\u1E85\u1E87\u1E89\u1E98\u24E6\uFF57]/gi,x:/[\u02E3\u1E8B\u1E8D\u2093\u2179\u24E7\uFF58]/gi,y:/[\u00FD\u00FF\u0177\u0233\u02B8\u1E8F\u1E99\u1EF3\u1EF5\u1EF7\u1EF9\u24E8\uFF59]/gi,z:/[\u017A\u017C\u017E\u1DBB\u1E91\u1E93\u1E95\u24E9\uFF5A]/gi}},"3.16.0",{requires:["yui-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("text-accentfold",function(e,t){var n=e.Array,r=e.Text,i=r.Data.AccentFold,s={canFold:function(e){var t;for(t in i)if(i.hasOwnProperty(t)&&e.search(i[t])!==-1)return!0;return!1},compare:function(e,t,n){var r=s.fold(e),i=s.fold(t);return n?!!n(r,i):r===i},filter:function(e,t){return n.filter(e,function(e){return t(s.fold(e))})},fold:function(t){return e.Lang.isArray(t)?n.map(t,s.fold):(t=t.toLowerCase(),e.Object.each(i,function(e,n){t=t.replace(e,n)}),t)}};r.AccentFold=s},"3.16.0",{requires:["array-extras","text-data-accentfold"]});
YUI.add("autosuggest-context-results-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,langBundles:this.details.langBundles,TAG_ITEM_TYPE:0,PERSON_ITEM_TYPE:1,GROUP_ITEM_TYPE:2,PAGE_ITEM_TYPE:3,processItem:function(t,n){var r;t.type=n,t.titleIntlKey&&(t.title=this.intlMessage({intlName:t.titleIntlKey}));if(t.aliasIntlKeys){t.aliases=t.aliases||[];for(r=0;r<t.aliasIntlKeys.length;r++)t.aliases.push(this.intlMessage({intlName:t.aliasIntlKeys[r]}))}return n===this.TAG_ITEM_TYPE||n===this.PAGE_ITEM_TYPE?t.key=t.title:t.key=t.nsid,t.matches&&(t.matches=t.matches.map(function(t){return t.token=e.Text.AccentFold.fold(t.token),t})),t},remote:{read:function(t){return e.ModelFetchers["flickr-autosuggest-getContextResults-fetcher"].run(t,this.appContext)}},attributes:{contextId:{writeOnce:"initOnly"},contextType:{writeOnce:"initOnly"},tags:{setter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.TAG_ITEM_TYPE);return e}},people:{setter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.PERSON_ITEM_TYPE);return e}},groups:{setter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.GROUP_ITEM_TYPE);return e}},pages:{readOnly:!0,getter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.PAGE_ITEM_TYPE);return e},defaultValue:[{url:"/photos/me/",titleIntlKey:"autosuggest.YOUR_PHOTOSTREAM",aliasIntlKeys:["autosuggest.ME"]},{url:"/me/albums/",titleIntlKey:"autosuggest.YOUR_ALBUMS",aliasIntlKeys:["autosuggest.SETS"]},{url:"/photos/me/collections/",titleIntlKey:"autosuggest.YOUR_COLLECTIONS",aliasIntlKeys:[]},{url:"/photos/me/galleries/",titleIntlKey:"autosuggest.YOUR_GALLERIES",aliasIntlKeys:[]},{url:"/photos/me/archives/",titleIntlKey:"autosuggest.YOUR_ARCHIVES",aliasIntlKeys:[]},{url:"/photos/me/tags/",titleIntlKey:"autosuggest.YOUR_TAGS",aliasIntlKeys:[]},{url:"/photos/me/map/",titleIntlKey:"autosuggest.YOUR_MAP",aliasIntlKeys:[]},{url:"/me/favorites/",titleIntlKey:"autosuggest.YOUR_FAVORITES",aliasIntlKeys:[]},{url:"/photos/me/stats/",titleIntlKey:"autosuggest.YOUR_STATS",aliasIntlKeys:["autosuggest.GRAPHS","autosuggest.REFERRERS","autosuggest.VIEWS"]},{url:"/services/apps/by/me/",titleIntlKey:"autosuggest.YOUR_APPS",aliasIntlKeys:[]},{url:"/activity/",titleIntlKey:"autosuggest.RECENT_ACTIVITY",aliasIntlKeys:[]},{url:"/photosof/me/",titleIntlKey:"autosuggest.PHOTOS_OF_YOU",aliasIntlKeys:["autosuggest.ME"]},{url:"/photos/upload/",titleIntlKey:"autosuggest.UPLOAD_PHOTOS",aliasIntlKeys:[]},{url:"/account/",titleIntlKey:"autosuggest.YOUR_ACCOUNT",aliasIntlKeys:["autosuggest.SETTINGS","autosuggest.PREFERENCES"]},{url:"/people/me/",titleIntlKey:"autosuggest.YOUR_PROFILE",aliasIntlKeys:["autosuggest.ME"]},{url:"/photos/organize/",titleIntlKey:"autosuggest.ORGANIZR",aliasIntlKeys:[]},{url:"/photos/contacts/",titleIntlKey:"autosuggest.YOUR_CONTACTS_PHOTOS",aliasIntlKeys:[]},{url:"/photosof/contacts/",titleIntlKey:"autosuggest.PHOTOS_OF_YOUR_CONTACTS",aliasIntlKeys:[]},{url:"/people/me/contacts/",titleIntlKey:"autosuggest.FOLLOWING",aliasIntlKeys:["autosuggest.CONTACTS_LIST"]},{url:"/people/me/contacts/rev/",titleIntlKey:"autosuggest.FOLLOWERS",aliasIntlKeys:[]},{url:"/import/people/",titleIntlKey:"autosuggest.FIND_YOUR_FRIENDS",aliasIntlKeys:[]},{url:"/invite/",titleIntlKey:"autosuggest.INVITE_YOUR_FRIENDS",aliasIntlKeys:[]},{url:"/invite/history/",titleIntlKey:"autosuggest.INVITE_HISTORY",aliasIntlKeys:[]},{url:"/invite/history/guests/",titleIntlKey:"autosuggest.GUEST_PASS_HISTORY",aliasIntlKeys:[]},{url:"/groups/",titleIntlKey:"autosuggest.YOUR_GROUPS",aliasIntlKeys:[]},{url:"/recent.gne/",titleIntlKey:"autosuggest.RECENT_GROUP_DISCUSSIONS",aliasIntlKeys:[]},{url:"/group_create.gne/",titleIntlKey:"autosuggest.CREATE_A_GROUP",aliasIntlKeys:[]},{url:"/explore/",titleIntlKey:"autosuggest.EXPLORE",aliasIntlKeys:[]},{url:"/photos/tags/",titleIntlKey:"autosuggest.POPULAR_TAGS",aliasIntlKeys:[]},{url:"/galleries/",titleIntlKey:"autosuggest.GALLERIES",aliasIntlKeys:[]},{url:"/analog/",titleIntlKey:"autosuggest.ANALOG",aliasIntlKeys:["autosuggest.FILM"]},{url:"/map/",titleIntlKey:"autosuggest.WORLD_MAP",aliasIntlKeys:[]},{url:"/places/",titleIntlKey:"autosuggest.PLACES",aliasIntlKeys:[]},{url:"/marketplace/",titleIntlKey:"autosuggest.FLICKR_MARKETPLACE",aliasIntlKeys:[]},{url:"/commons/",titleIntlKey:"autosuggest.THE_COMMONS",aliasIntlKeys:[]},{url:"/creativecommons/",titleIntlKey:"autosuggest.CREATIVE_COMMONS",aliasIntlKeys:["autosuggest.CC","autosuggest.LICENSE"]},{url:"/services/",titleIntlKey:"autosuggest.THE_APP_GARDEN",aliasIntlKeys:[]},{url:"/cameras/",titleIntlKey:"autosuggest.CAMERA_FINDER",aliasIntlKeys:[]},{url:"/services/api/",titleIntlKey:"autosuggest.API_DOCUMENTATION",aliasIntlKeys:["autosuggest.PROGRAMMING","autosuggest.CODE","autosuggest.DEVELOPER"]},{url:"/services/developer/",titleIntlKey:"autosuggest.DEVELOPER_GUIDE",aliasIntlKeys:["autosuggest.API","autosuggest.PROGRAMMING","autosuggest.CODE","autosuggest.DOCUMENTATION"]},{url:"/services/feeds/",titleIntlKey:"autosuggest.FEEDS",aliasIntlKeys:["autosuggest.RSS","autosuggest.ATOM","autosuggest.DATA"]},{url:"/help/",titleIntlKey:"autosuggest.HELP",aliasIntlKeys:[]},{url:"/help/guidelines/",titleIntlKey:"autosuggest.COMMUNITY_GUIDELINES",aliasIntlKeys:[]},{url:"/help/forum/",titleIntlKey:"autosuggest.HELP_FORUM",aliasIntlKeys:[]},{url:"/tools/",titleIntlKey:"autosuggest.TOOLS",aliasIntlKeys:["autosuggest.UPLOAD","autosuggest.MAC","autosuggest.WINDOWS"]},{url:"/about/",titleIntlKey:"autosuggest.ABOUT_FLICKR",aliasIntlKeys:["autosuggest.STAFF"]},{url:"/mail/",titleIntlKey:"autosuggest.FLICKR_MAIL",aliasIntlKeys:[]},{url:"/create/",titleIntlKey:"autosuggest.CREATE",aliasIntlKeys:["autosuggest.WALL_ART","autosuggest.PHOTO_BOOKS"]},{url:"/create/curatedcollection/",titleIntlKey:"autosuggest.CURATED_COLLECTION",aliasIntlKeys:[]},{url:"/cameraroll/",titleIntlKey:"autosuggest.CAMERA_ROLL"
,aliasIntlKeys:["autosuggest.ORGANIZE"]},{url:"/20under20/",titleIntlKey:"autosuggest.TWENTY_UNDER_TWENTY",aliasIntlKeys:[]},{url:"http://blog.flickr.net",titleIntlKey:"autosuggest.THE_FLICKR_BLOG",aliasIntlKeys:[]},{url:"http://code.flickr.net",titleIntlKey:"autosuggest.THE_FLICKR_CODE_BLOG",aliasIntlKeys:["autosuggest.API","autosuggest.PROGRAMMING","autosuggest.CODE","autosuggest.DEVELOPER"]},{url:"/jobs/",titleIntlKey:"autosuggest.JOBS_AT_FLICKR",aliasIntlKeys:["autosuggest.CAREER"]}]}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-autosuggest-getContextResults-fetcher","text-accentfold"],langBundles:["autosuggest"]});
YUI.add("flickr-autosuggest-getContextResults-fetcher",function(e,t){"use strict";function n(t){var n=t.id.split("_"),r={extras:e.APIHelper.request.getRebootPhotoExtras(),context_id:n[0],context_type:n[1]};return r}function r(e,t){var n=e[0],r=e[1],i;i={id:t.id,contextId:t.context_id,contextType:t.context_type,tags:n.results.tags||[],people:n.results.people||[],groups:n.results.groups||[]};if(!n.results)throw new Error("No `results` property returned by API.");return r.add(i)}function i(n,r){var i=this,s="flickr.autosuggest.getContextResults",o=this._processParams(n);return e.Promise.all([r.callAPI(s,o),r.getModelRegistry("autosuggest-context-results-models")]).then(function(t){return i._processResponse(t,e.merge(o,n))},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-autosuggest-getContextResults-fetcher"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["autosuggest-context-results-models"]});
YUI.add("hermes-template-search-autosuggest-list-item",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" header"}function h(e,t){return" empty"}function p(e,t){var r="",i;r+=" autosuggest-selectable-item",i=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(6,d,t),data:t});if(i||i===0)r+=i;r+='" data-track="autosuggestNavigate_',(i=n.rapidType)?i=i.call(e,{hash:{},data:t}):(i=e.rapidType,i=typeof i===u?i.apply(e):i),r+=a(i)+'" data-href="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',i=n["if"].call(e,e.title,{hash:{},inverse:f.noop,fn:f.program(8,v,t),data:t});if(i||i===0)r+=i;return r+=' tabindex="0"',r}function d(e,t){return" selected"}function v(e,t){var r="",i;return r+=' data-title="',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function m(e,t){return'"'}function g(e,t){var r="",i,s;r+='<span class="item-icon"><span class="avatar tiny no-menu '+a((i=(i=e.avatar,i==null||i===!1?i:i.type),typeof i===u?i.apply(e):i))+'" title="'+a((i=(i=e.avatar,i==null||i===!1?i:i.title),typeof i===u?i.apply(e):i))+'"',s=n["if"].call(e,(i=e.avatar,i==null||i===!1?i:i.groupNsid),{hash:{},inverse:f.noop,fn:f.program(13,y,t),data:t});if(s||s===0)r+=s;s=n["if"].call(e,(i=e.avatar,i==null||i===!1?i:i.personNsid),{hash:{},inverse:f.noop,fn:f.program(15,b,t),data:t});if(s||s===0)r+=s;return r+=' style="background-image: url('+a((i=(i=e.avatar,i==null||i===!1?i:i.url),typeof i===u?i.apply(e):i))+');"></span></span>',r}function y(e,t){var n="",r;return n+=' data-group-nsid="'+a((r=(r=e.avatar,r==null||r===!1?r:r.groupNsid),typeof r===u?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+=' data-person-nsid="'+a((r=(r=e.avatar,r==null||r===!1?r:r.personNsid),typeof r===u?r.apply(e):r))+'"',n}function w(e,t){var r="",i;return r+='<span class="item-icon"><span class="',(i=n.iconClass)?i=i.call(e,{hash:{},data:t}):(i=e.iconClass,i=typeof i===u?i.apply(e):i),r+=a(i)+'"></span></span>',r}function E(e,t){return'<span class="item-icon"></span>'}function S(e,t){var r="",i,s,o;r+='<span class="item-title',i=n["if"].call(e,e.header,{hash:{},inverse:f.noop,fn:f.program(22,x,t),data:t});if(i||i===0)r+=i;r+='">',o={hash:{},data:t},s=(i=n.multiHighlightString||e.multiHighlightString,i?i.call(e,e.title,e.titleHighlights,"highlight",o):l.call(e,"multiHighlightString",e.title,e.titleHighlights,"highlight",o));if(s||s===0)r+=s;return r+="</span>",r}function x(e,t){return" tertiary"}function T(e,t){var r="",i,s,o;r+='<span class="item-subtitle ',i=n["if"].call(e,e.header,{hash:{},inverse:f.program(27,C,t),fn:f.program(25,N,t),data:t});if(i||i===0)r+=i;r+='">',i=n.unless.call(e,e.header,{hash:{},inverse:f.noop,fn:f.program(29,k,t),data:t});if(i||i===0)r+=i;o={hash:{},data:t},s=(i=n.multiHighlightString||e.multiHighlightString,i?i.call(e,e.subtitle,e.subtitleHighlights,"highlight",o):l.call(e,"multiHighlightString",e.subtitle,e.subtitleHighlights,"highlight",o));if(s||s===0)r+=s;s=n.unless.call(e,e.header,{hash:{},inverse:f.noop,fn:f.program(31,L,t),data:t});if(s||s===0)r+=s;return r+="</span>",r}function N(e,t){return"link"}function C(e,t){return"tertiary"}function k(e,t){return"("}function L(e,t){return")"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="autosuggest-item',o=n["if"].call(t,t.header,{hash:{},inverse:f.noop,fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.empty,{hash:{},inverse:f.noop,fn:f.program(3,h,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.url,{hash:{},inverse:f.program(10,m,i),fn:f.program(5,p,i),data:i});if(o||o===0)s+=o;s+=">\n	",o=n["if"].call(t,t.avatar,{hash:{},inverse:f.noop,fn:f.program(12,g,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.iconClass,{hash:{},inverse:f.noop,fn:f.program(17,w,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.useIconPlaceholder,{hash:{},inverse:f.noop,fn:f.program(19,E,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.title,{hash:{},inverse:f.noop,fn:f.program(21,S,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.subtitle,{hash:{},inverse:f.noop,fn:f.program(24,T,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-autosuggest-list-item",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-search-autosuggest-items-list",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function a(e,t){var i="",s;i+='\n		<li class="autosuggest-list-elem" role="menuitem">',s=u.invokePartial(r["search-autosuggest-list-item"],"search-autosuggest-list-item",e,n,r,t);if(s||s===0)i+=s;return i+="</li>\n	",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=this;s+='<ul class="autosuggest-items-list" role="menu">\n	',o=n.each.call(t,t.autosuggestItems,{hash:{},inverse:u.noop,fn:u.program(1,a,i),data:i});if(o||o===0)s+=o;return s+="\n</ul>\n",s}),r={};e.Array.each(["search-autosuggest-list-item"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-autosuggest-items-list",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-search-autosuggest-list-item"]});
YUI.add("autosuggest-data-manager",function(e){function n(e){return e.trim().split(/\s+/)}function r(t){var n=t.replace(/[\W,_]/g,"").toLowerCase();return e.fluid.removeDiacritics(n)}function i(e){var t="",n=e.split(""),r,i;for(i=0,r=n.length;i<r-1;i++)t+=n[i]+"[\\W,_]*";return t+=n[r-1],t}var t;t=e.AutosuggestDataManager=function(e){e=e||{},e.prefixTrie?this.prefixTrie=e.prefixTrie:this._buildPrefixTrie(e.items)},t.locateQuery=function(e,t){var s=[],o,u,a={},f,l,c,h,p,d;if(!e||!t)return[];o=n(e);for(d=0,u=o.length;d<u;d++)f=r(o[d]),a[f]||(l=i(f),c=new RegExp("(\\b|_)("+l+")","i"),h=c.exec(t),h&&(p=h.index+h[1].length,s.push({start:p,end:p+h[2].length})),a[f]=!0);return s},t.deserialize=function(e){return new t({prefixTrie:JSON.parse(e)})},t.prototype={add:function(e){function f(i){var l,c,h,p,d,v,m,g,y,b,w;for(l=0,c=i.length;l<c;l++){h=i[l],d=[],h.title&&(d=d.concat(n(h.title))),h.subtitle&&(d=d.concat(n(h.subtitle)));if(h.aliases)for(w=0,p=h.aliases.length;w<p;w++)d=d.concat(n(h.aliases[w]));for(w=0,v=d.length;w<v;w++){m=d[w],g=t.prefixTrie,y=r(m).split("");while(b=y.shift())g.children[b]=g.children[b]||t._newTrieNode(),g=g.children[b],g.itemKeys[h.key]||(g.items.push(h),g.itemKeys[h.key]=!0)}}o<s&&(s>o+u?a=o+u:a=s,i=e.slice(o,a),o=a,setTimeout(function(){f(i)},0))}var t=this,i,s,o,u=250,a;o=0,s=e.length,s>o+u?a=o+u:a=s,i=e.slice(o,a),o=a,f(i)},query:function(e){var t=this,i,s,o,u,a,f;return e?(i=n(e),i.every(function(e){s=t.prefixTrie,o=r(e).split("");if(!o.length)return!0;while(s&&(f=o.shift()))s=s.children[f];return!s||o.length!==0?(a=[],!1):(u=s.items.slice(),a=a?t._intersectMatches(a,u):u,a&&a.length===0?!1:!0)}),a||[]):[]},serialize:function(){return JSON.stringify(this.prefixTrie)},_buildPrefixTrie:function(e){this.prefixTrie=this._newTrieNode(),e&&this.add(e)},_newTrieNode:function(){return{items:[],itemKeys:{},children:{}}},_intersectMatches:function(e,t){return e.filter(function(e){return t.some(function(t){return t.key===e.key})})}}},"@VERSION@",{requires:[],optionalRequires:["fluid"]});
YUI.add("search-autosuggest-items-list-view",function(e){var t=[{key:"photos",headerTemplate:{titleIntlKey:"search.PHOTOS",searchLink:{textIntlKey:"search.SEARCH_PHOTOS",searchType:e.SearchUrl.searchTypes.PHOTOS,rapidType:"searchPhotos",iconClass:"icon-photos"}}},{key:"people",headerTemplate:{titleIntlKey:"search.PEOPLE",searchLink:{textIntlKey:"search.SEARCH_PEOPLE",searchType:e.SearchUrl.searchTypes.PEOPLE,rapidType:"searchPeople",iconClass:"icon-people"}}},{key:"groups",headerTemplate:{titleIntlKey:"search.GROUPS",searchLink:{textIntlKey:"search.SEARCH_GROUPS",searchType:e.SearchUrl.searchTypes.GROUPS,rapidType:"searchGroups",iconClass:"icon-groups"}}},{key:"pages"}],n=3;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.set("autosuggestItems",t.autosuggestItems||{}),this.set("searchUrl",new e.SearchUrl(this.appContext.getLocation().href,this.appContext)),this.set("searchQuery",""),this},loadState:function(){var t=this.appContext.getViewer().signedIn?this.appContext.getViewer().nsid+"_user":"global_global",n=this;return this.appContext.getModel("autosuggest-context-results-models",{id:t}).then(function(e){e&&(n.processTimeout=setTimeout(function(){n.processAutosuggestModels(e)},500))},function(r){e.Flog.warn("["+n.name+"] couldn't load autosuggest data for",t)})},processAutosuggestModels:function(t){var n={};t&&t.getValue("pages").length&&(n.pages=new e.AutosuggestDataManager({items:t.getValue("pages")})),t&&t.getValue("people").length&&(n.people=new e.AutosuggestDataManager({items:t.getValue("people")})),t&&t.getValue("groups").length&&(n.groups=new e.AutosuggestDataManager({items:t.getValue("groups")})),this.set("autosuggestDataManagers",n)},updateAutosuggestItems:function(e){var t=this.get("autosuggestDataManagers"),n={},r;r=function(e,t){return e.score&&t.score?t.score-e.score:0},e&&t&&(t.pages&&(n.pages=t.pages.query(e).sort(r)),t.people&&(n.people=t.people.query(e).sort(r)),t.groups&&(n.groups=t.groups.query(e).sort(r))),this.set("autosuggestItems",n||{}),this.set("searchQuery",e||""),this.set("previouslySelectedNode",null),this.buildContainer()},buildContainer:function(){return this.assembleAutosuggestItemsList(),this.setContainerHTML(this.templates("search-autosuggest-items-list")({autosuggestItems:this.get("autosuggestItemsList")})),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.delegate("blur",this.handleAutosuggestListItemBlur.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("click",this.handleAutosuggestListItemClick.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("mouseenter",this.handleAutosuggestListItemHoverOn.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("keydown",this.handleAutosuggestListItemKeydown.bind(this),".autosuggest-selectable-item")),this},onParentViewEvent:function(e,t){var n=t&&t.length&&t[0];switch(n){case"update-autosuggest-items":this.updateAutosuggestItems(t[1],t[2]);break;case"enable-autosuggest":this.get("container").removeClass("disabled");break;case"disable-autosuggest":this.get("container").addClass("disabled");break;case"autosuggest-keyboard-nav":t[1]&&this.doKeyboardNav(t[1],!0)}},assembleAutosuggestItemsList:function(){var e=[],r=this.get("autosuggestItems")||{},i=this.get("searchQuery")||"",s,o,u;if(i)for(o=0;o<t.length;o++){s=t[o];if(r.hasOwnProperty(s.key)&&r[s.key].length){e.push(this.buildSectionHeaderItem(s.headerTemplate,i,!0));for(u=0;u<Math.min(n,r[s.key].length);u++)e.push(this.buildAutosuggestListItem(r[s.key][u],s.key,i))}else s.headerTemplate&&e.push(this.buildSectionHeaderItem(s.headerTemplate,i,!1))}e.length?(e[0].selected=!0,this.fire("subviewViewEvent","autosuggest-has-items")):this.fire("subviewViewEvent","autosuggest-no-items"),this.set("autosuggestItemsList",e)},buildSectionHeaderItem:function(e,t,n){var r={header:!0};return e?(r.iconClass="icon-search",e.searchLink&&(r.subtitle=this.intlMessage({intlName:e.searchLink.textIntlKey}),r.url=this.get("searchUrl").clone().createNewSearch(t).setSearchType(e.searchLink.searchType).getURL(),r.iconClass=e.searchLink.iconClass,r.rapidType=e.searchLink.rapidType)):r.empty=!0,r},buildAutosuggestListItem:function(t,n,r){var i={item:!0},s,o;return i.title=t.title||"",i.subtitle=t.subtitle||"",i.rapidType=n,i.titleHighlights=e.AutosuggestDataManager.locateQuery(r,i.title),i.subtitleHighlights=e.AutosuggestDataManager.locateQuery(r,i.subtitle),n==="pages"?(i.url=t.url||"",i.iconClass="icon-docs"):(s=n==="groups"?"groups":"photos",o=t.pathalias||t.nsid,o&&(i.url="/"+s+"/"+o),t.nsid&&(t.iconserver||t.iconserver===0)&&(i.avatar={type:n==="groups"?"group":"person",title:i.title,url:e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver),personNsid:n==="people"?t.nsid:!1,groupNsid:n==="groups"?t.nsid:!1})),i},handleAutosuggestListItemBlur:function(t){var n,r=this;setTimeout(function(){n=e.one(e.config.doc.activeElement),n.hasClass("autosuggest-selectable-item")||r.fire("subviewViewEvent","autosuggest-lost-all-focus")},25)},handleAutosuggestListItemClick:function(e){this.navigateFromAutosuggestListNode(e.currentTarget)},handleAutosuggestListItemKeydown:function(t){var n="";t.halt();if(t.altKey===!0)e.fire("transfer-to-gn-search",n);else if(t.keyCode>=48&&t.keyCode<=90)n=String.fromCharCode(t.keyCode),t.shiftKey===!0?n=n.toUpperCase():n=n.toLowerCase(),e.fire("transfer-to-gn-search",n);else switch(t.keyCode){case 8:this.fire("subviewViewEvent","backspace-focus");break;case 13:this.navigateFromAutosuggestListNode(t.target);break;case 27:this.blurAllAutosuggestListNodes();break;case 38:this.doKeyboardNav("up",!1);break;case 40:this.doKeyboardNav("down",!1)}},navigateFromAutosuggestListNode:function(t){var n,r,i;t&&(n=t.getData("href"),r=t.getData("title"),i=t.getData("track")),r&&this.fire("subviewViewEvent","autosuggest-update-field",r),n&&(e.rapidTracker
.beacon(this.name,i),this.updateAutosuggestItems(),this.appContext.flapp.navigate(n))},blurAllAutosuggestListNodes:function(){var e=this.get("container").all(".autosuggest-selectable-item"),t=e?e.size():0;if(!t)return;e.each(function(e){e.blur()})},doKeyboardNav:function(e,t){var n=this.get("container").all(".autosuggest-selectable-item"),r=n?n.size():0,i=-1,s;if(!r)return;s=this.get("container").one(".autosuggest-selectable-item.selected"),s&&(i=n.indexOf(s)),n.removeClass("selected"),i=e==="up"?i-1:i+1,i>=0&&i<r?(s=n.item(i),s.addClass("selected"),s.focus()):t?(i=i<0?r-1:0,s=n.item(i),s.addClass("selected"),s.focus()):this.fire("subviewViewEvent","focus-search-field")},handleAutosuggestListItemHoverOn:function(e){var t=this.get("container").one(".autosuggest-selectable-item.selected"),n=e.target;t&&t.removeClass("selected"),n.addClass("selected"),n.focus()},destructor:function(){this.processTimeout&&clearTimeout(this.processTimeout)}})},"@VERSION@",{requires:["flog","flickr-view","flickr-promise","hermes-template-search-autosuggest-items-list","hermes-template-search-autosuggest-list-item","search-autosuggest-items-list-css","autosuggest-data-manager","search-url","url-helper"],langBundles:["search"]});
YUI.add("search-autosuggest-field-view",function(e){var t=150;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n=this.appContext.getLocation();return this.set("searchUrl",new e.SearchUrl(n.href,this.appContext)),this.set("siteSection",e.URLHelper.getSiteSectionByURL(n.pathname)),this.appContext.flipper.isFlipped("enable-search-pills")&&this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"})}),this.enableMobileNav=t.enableMobileNav,this},subviewConfig:{"search-autosuggest-items-list-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.enableMobileNav||this.appContext.getUA().isMobileOrTablet}}},loadState:function(){var t;return this.enableMobileNav?e.Promise.resolve():(t=[this.getContextModelPromise()],e.Promise.all(t))},additionalViewClasses:function(){var e=[];return e},buildContainer:function(){var e=this.get("context"),t=this.get("searchUrl").getSearchTerm(),n=[];return e&&e.type&&n.push({combo:!0,name:e.name,secondName:this.get("contextToString")[e.scope]}),this.setContainerHTML(this.templates("search-autosuggest-field")({searchTerm:t,pills:n,hasPills:n.length>0,"search-autosuggest-items-list-view":this.subviews["search-autosuggest-items-list-view"]?this.subviews["search-autosuggest-items-list-view"].get("container"):""})),(n.length>0||t.length>0)&&this.get("container").addClass("expanded"),this},activate:function(){var t=this.get("container"),n=t.one("#search-field");this.appContext.getViewer().prefs&&this.appContext.getViewer().prefs.keyboardShortcutsEnabled&&this.attachKeyEvent("up:83",this.focusSearchField.bind(this)),this.registerEventHandler(t.one("form").on("submit",this.executeSearch.bind(this))),this.appContext.flipper.isFlipped("enable-search-pills")&&this.registerEventHandler(e.on("add-context-to-search-field",this.addContext.bind(this))),this.appContext.flipper.isFlipped("enable-empty-search-text-transfer")&&this.registerEventHandler(e.on("transfer-to-gn-search",this.addSearchText.bind(this))),this.registerEventHandler(t.on("mousedown",this.handleMouseDown.bind(this))),this.registerEventHandler(n.on({valuechange:this.updateAutosuggestItems.bind(this),focus:this.handleSearchFieldFocus.bind(this),blur:this.handleSearchFieldBlur.bind(this)})),this.registerEventHandler(n.on("key",this.handleSearchFieldKeydown.bind(this),"down:27,38,40,8"));try{e.config.doc.activeElement.isEqualNode(n.getDOMNode())&&(this.blurSearchField(),this.focusSearchField())}catch(r){}return this},getContextModelPromise:function(){var t=this.get("searchUrl").getAPIParams(),n=e.Promise.resolve(),r=null,i=this;return this.appContext.flipper.isFlipped("enable-search-pills")&&(t[e.SearchHelper.API.groupId]?(r={type:"group",id:t[e.SearchHelper.API.groupId],scope:"photos"},n=this.appContext.getModel("group-info-models",r.id)):t[e.SearchHelper.API.userId]?(r={type:"user",id:t[e.SearchHelper.API.userId],scope:t[e.SearchHelper.API.faves]?"favorites":"photostream"},t[e.SearchHelper.API.faves]?r.scope="favorites":t[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]?r.scope="albums":r.scope="photostream",n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.faves]?(r={type:"user",id:this.appContext.getViewer().nsid,scope:"favorites"},n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.contacts]?r={type:"contacts",scope:"photos",name:this.get("contextToString").contacts}:t[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(r={type:"everyone",scope:"photos",name:this.get("contextToString").everyone})),n.then(function(e){e&&(r.name=r.type==="user"?e.getValue("displayname"):e.getValue("group").getValue("title")),i.set("context",r)})},handleMouseDown:function(e){var t=e.target;if(e.which===1)if(t.hasClass("search-pill-remover"))e.halt(),this.removeContext();else if(t.hasClass("search-icon-button"))e.halt(),this.executeSearch(e);else if(t.hasClass("search-pill")||t.hasClass("search-pillbox")||t.hasClass("search-form"))e.halt(),this.focusSearchField()},addSearchText:function(e){var t=this.get("container").one("#search-field");t.set("value",t.get("value")+e),this.focusSearchField()},addPill:function(t,n){var r,i={name:t};n&&(i.combo=!0,i.secondName=n),r=e.Node.create(this.templates("search-pill")(i)),this.get("container").one(".search-pillbox").appendChild(r)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},addContext:function(t){var n=this.get("context");if(!n||n.id!==t.id||n.name!==t.name||n.type!==t.type||n.scope!==t.scope)n&&n.type?(this.removeContext(),this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope])):(this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope]));this.fire("parentViewEvent","disable-autosuggest"),this.get("container").one("#search-field").set("placeholder",""),this.focusSearchField(),e.rapidTracker.beacon(this.name,"searchAddContext_"+t.type+"_"+t.scope)},removeContext:function(){var t=this.get("container"),n=t.one("#search-field");this.set("context",null),n.set("placeholder",this.intlMessage({intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"})),this.removePills(),this.blurSearchBar(),e.fire("remove-context-in-search-field",{}),e.rapidTracker.beacon(this.name,"searchRemoveContext");if(this.get("siteSection")&&this.get("siteSection").name==="search"&&n.get("value").length>0){this.executeSearch();return}this.updateAutosuggestItems(),t.hasClass("expanded")&&(this.fire("parentViewEvent"
,"enable-autosuggest"),this.firstAutosuggestView||(e.rapidTracker.beacon(this.name,"autosuggestShow"),this.firstAutosuggestView=!0))},onParentViewEvent:function(e,t){var n=t&&t.length&&t[0];switch(n){case"resize-search-field":this.resizeSearchField(t[1]);break;case"focus-search-field":this.focusSearchField();break;case"clear-search-field":this.clearSearchField()}},onSubviewEvent:function(e,t){var n=t&&t.length&&t[0],r=this.get("container"),i,s;switch(n){case"autosuggest-lost-all-focus":this.handleAutosuggestBlur();break;case"focus-search-field":this.focusSearchField();break;case"autosuggest-no-items":r.removeClass("autosuggest-active");break;case"autosuggest-has-items":r.addClass("autosuggest-active");break;case"autosuggest-update-field":s=r.one("#search-field"),s&&typeof t[1]=="string"&&s.set("value",t[1]);break;case"backspace-focus":s=r.one("#search-field"),s&&(i=s.get("value"),s.set("value",i.substring(0,i.length-1)),this.focusSearchField())}},executeSearch:function(t){var n,r,i,s={};t&&t.halt(),n=this.get("container").one("#search-field").get("value"),i=this.get("context"),i&&i.type?(i.type==="group"&&i.scope==="discussions"?(s.q=n,s.w=i.id,s.m="discuss",r=new e.SearchUrl(s,this.appContext,e.SearchUrl.searchTypes.CLASSIC_GROUPS)):(i.type==="user"?(s[e.SearchHelper.API.userId]=i.id,i.scope==="favorites"?s[e.SearchHelper.API.faves]=1:i.scope==="albums"?s[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]=1:s[e.SearchHelper.API.userId]=i.id):i.type==="group"?s[e.SearchHelper.API.groupId]=i.id:i.type==="contacts"?s[e.SearchHelper.API.contacts]="all":i.type==="everyone",s[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]=1,r=this.get("searchUrl"),Object.keys(s).forEach(function(e){r.setAPIParam(e,s[e])}),r.setSearchType(e.SearchUrl.searchTypes.PHOTOS),r.setSearchTerm(n)),e.rapidTracker.beacon(this.name,"searchWithContext_"+i.type+"_"+i.scope)):(r=this.get("searchUrl"),r.createNewSearch(n)),this.appContext.flapp.navigate(r.getURL())},focusSearchField:function(t){e.OverlayManager.DroparoundOverlay.closeAll(),this.get("container").one("#search-field").focus()},blurSearchField:function(e){this.get("container").one("#search-field").blur()},resizeSearchField:function(e){e?(this.get("container").setStyle("width",e+"px"),this.get("container").one("#search-field").setStyle("width",e+"px")):(this.get("container").removeAttribute("style"),this.get("container").one("#search-field").removeAttribute("style"))},clearSearchField:function(e){this.get("container").one("#search-field").set("value","")},updateAutosuggestItems:function(e){var t=this.get("container"),n=t.one("#search-field").get("value");e&&e.halt();if(this.get("context"))return;this.fire("parentViewEvent","update-autosuggest-items",n)},handleSearchFieldFocus:function(t){var n=this.get("container"),r=n.one(".search-form"),i,s=this;t.halt(),n.hasClass("focus")||(n.addClass("focus"),n.addClass("expanded"),this.expandTimer&&clearTimeout(this.expandTimer),this.get("context")||(i=this.registerEventHandler(r.on("transitionend",function(){s.detachRegisteredEvent(i),s.updateAutosuggestItems(),n.hasClass("expanded")&&(s.fire("parentViewEvent","enable-autosuggest"),s.firstAutosuggestView||(e.rapidTracker.beacon(s.name,"autosuggestShow"),s.firstAutosuggestView=!0))}))))},blurSearchBar:function(){clearTimeout(this.expandTimer),this.expandTimer=setTimeout(function(){var t=this.get("container"),n=this.get("context"),r=e.one(e.config.doc.activeElement);r.hasClass("autosuggest-selectable-item")||(t.removeClass("focus"),t.removeClass("autosuggest-active"),(!n||!n.type)&&t.one("#search-field").get("value").length===0&&t.removeClass("expanded"),this.fire("parentViewEvent","disable-autosuggest"))}.bind(this),t)},handleSearchFieldBlur:function(e){e.halt(),e.relatedTarget&&e.relatedTarget.hasClass("search-icon-button")?this.executeSearch():this.blurSearchBar()},handleAutosuggestBlur:function(){this.blurSearchBar()},handleSearchFieldKeydown:function(t){var n=t.keyCode,r=t.target;switch(n){case 27:t.halt(),this.blurSearchField();break;case 38:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","up");break;case 40:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","down");break;case 8:e.fluid.getTextFieldCursorPosition(r)===0&&e.fluid.getTextFieldSelection()===""&&this.removeContext()}},destructor:function(){clearTimeout(this.expandTimer),this.expandTimer=null}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-field","hermes-template-search-pill","search-autosuggest-field-css","search-url","autosuggest-context-results-models","storage-helper","search-autosuggest-items-list-view","url-helper"],optionalRequires:["fluid"],langBundles:["search","common","groups"]});
YUI.add("hermes-lang-groups",function(e,t){e.Intl.add("hermes/groups","en-US",{POST_THRESHOLD_EVER:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool."],POST_THRESHOLD_DAY:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool each day."],POST_THRESHOLD_MONTH:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool each month."],POST_THRESHOLD_WEEK:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool each week."],ACCEPTED_CONTENT_TYPES:["Accepted content types:"],ACCEPTED_SAFETY_LEVELS:["Accepted safety levels:"],PHOTOS:["Photos"],VIDEOS:["Videos"],IMAGES:["Images"],SCREENSHOTS:["Screenshots"],ART:["Art"],SAFE:["Safe"],MODERATE:["Moderate"],RESTRICTED:["Restricted"],SEE_ALL_DISCUSSIONS:["See all discussions"],DISCUSSION_TITLE:["Title"],DISCUSSION_AUTHOR:["Author"],DISCUSSION_REPLIES:["Replies"],DISCUSSION_LAST_POST:["Latest Post"],DISCUSSION_LAST_REPLIER:["Last Replier"],NO_DISCUSSIONS:["Be the first to start a group discussion!"],BE_THE_FIRST:["Be the first to add a photo to the group!"],BE_THE_FIRST_JOIN:["Help get this group started: click the join button above!"],BE_THE_FIRST_SIGN_IN:["Help get this group started: sign in and contribute photos!"],NO_PHOTOS_BY_YOU:["You haven't added any photos yet. What are you waiting for?"],WHO_IS_ME:['Who is this "me" of which you speak?'],INVALID_PERSON:["Never heard of them! Sorry!"],ADD_SOME_PHOTOS:["Add some photos"],NO_PHOTOS:["No photos in this group"],POOL_PREVIEW_HEADER:["Photo pool"],POOL_HEADER:["Group pool"],ADD_PHOTO:["Add photo"],VIEW_X_PHOTOS:[{type:"plural",valueName:"count",options:{one:"View ${#} photos",other:"View ${#} photos"}}],DISCUSSIONS:["Discussions"],ADD_TOPIC:["Add topic"],SEARCH_DISCUSSIONS:["Search discussions"],SEARCH_POOL:["Search pool"],ADD_A_TOPIC:["Add a topic"],TOP_CONTRIBUTORS:["Top Contributors"],CONTRIBUTORS:["Contributors"],CONTRIBUTORS_RANK:["Rank"],CONTRIBUTORS_LATEST_PHOTO:["Latest Photo"],CONTRIBUTORS_PHOTOS:["Photos"],CONTRIBUTORS_DISCUSSIONS:["Discussions"],CONTRIBUTORS_JOINED_GROUP:["Joined Group"],SEE_ALL_MEMBERS:["View all members"],TOTAL_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"${#} discussion in",other:"${#} discussions in"}}," ","${groupname}"],DISCUSSION_STICKY:["Sticky"],RANKING:["#","${count}"],BLAST_INVITED_MEMBER:["MEMBER"],BLAST_PENDING_MEMBER:["MEMBER"],BLAST_GROUP_MEMBER:["MEMBER"],BLAST_MODERATOR:["MODERATOR"],BLAST_ADMIN:["ADMIN"],SHARE:["Share"],EIGHTTEEN_PLUS_SIGNEDIN:["This group is 18+, do you want to enter?"],EIGHTEEN_PLUS_SIGNEDOUT:["This group is 18+. Sign in to view the group."],NO:["No"],YES:["Yes"],GROUP_POOL_LOADING_ERROR:["Error loading the group's pool photos"],GROUP_DISCUSSION_LOADING_ERROR:["Error loading the group's discussion list"],GROUP_TOP_CONTRIBUTORS_LOADING_ERROR:["Error loading the group's top contributors"],GROUP_DELETION_ERROR:["Something went wrong deleting the photo...please try again."],RETRY:["Retry"],ADDED_NOTIFICATION:['Success! Would you like to <a href="',"${url}",'">add something else</a>?'],NOT_ADDED_NOTIFICATION:['That\u2019s already in the group pool. <a href="',"${url}",'">Try something else?</a>'],PENDING_NOTIFICATION:['Your photo/video has been submitted the group. If approved by the group administrator, it will show up in the group pool. Would you like to <a href="',"${url}",'">add another</a>?'],DONE_PENDING_NOTIFICATION:["All done! There's nothing else to moderate."],GROUP_ADD_PENDING:["Pending approval by administrator"],DELETED_NOTIFICATION:["That item has been removed from the pool."],POOL_MEMBERS_ONLY:["This group pool is for members only."],DISCUSSION_MEMBERS_ONLY:["This group discussion is for members only."],DISCUSSION_MEMBERS_ONLY_INTERSTITIAL:["This group discussion is for members only. Join the conversation with the Join group button above, or click Overview to learn more about the group."],REMOVE_PHOTO:["Remove this photo from the group pool?"],PENDING_COUNT_NOTIFICATION:['You have <a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0 photos",one:"${#} photo",other:"${#} photos"}}," pending</a>"],X_GROUPS:[{type:"plural",valueName:"count",options:{one:"${#} Group",other:"${#} Groups"}}],HAS_NONE:["Looks like you don't belong to any group, so there is a list of ones you might like below."],SIGNED_OUT:["Groups are a fabulous way to share content and conversation, either privately or with the world. Believe us when we say there's probably a group for everyone, but if you can't find one you like, feel free to start your own."],LAST_REPLY_TIME_AGO:['<a href="',"${replyurl}",'" data-track="groupDiscussionTopicLastReplyClick">',"${time}"," ago</a>"],MEMBERS_ONLY_POOL_JOIN:["Only members can see this group pool. Click Overview above to learn more about the group, or the Join group button above to, uh...join!"],MEMBERS_ONLY_POOL_SIGN_IN:["Only members can see this group pool. Sign in to join the group."],PRIVATE_GROUP:["You've reached a private group."],RETURN_HOME:["Return home"],DISCUSSIONS_DISABLED:["Discussions are disabled for this group."],GO_TO_GROUP_HOME:["Go to group home"],GROUP_JOIN_RULES_DIALOG_TITLE:["Group Rules"],GROUP_JOIN_RULES_DIALOG_MESSAGE:["If you agree to these rules, you can join the group."],GROUP_JOIN_RULES_DIALOG_ACCEPT:["I agree"],GROUP_JOIN_RULES_DIALOG_DECLINE:["No, thanks"],GROUP_JOIN_ERROR:["Something went wrong with joining the group."],GROUP_LEAVE_ERROR:["Something went wrong with leaving the group."],GROUPS:["Groups"],GROUPS_LIST_LOADING_ERROR:['There was an issue loading the groups.<br>Click <a class="retry">Reload</a> to try again.'],GROUPS_LIST_ERROR_HEADER:["Error loading groups"],CONTRIBUTORS_DISCUSSION_TOPICS:["Topics"],GROUPS_LIST_GROUPS:["Groups"],GROUPS_LIST_MEMBERS
:["Members"],GROUPS_LIST_PHOTOS:["Photos"],GROUPS_LIST_TOPICS:["Topics"],GROUPS_LIST_LATEST:["Latest"],GROUPS_LIST_LATEST_DISCUSSION:["Latest Post"],GROUPS_LIST_LATEST_PHOTO:["Latest Photo"],GROUPS_LEAVE_WARNING_TITLE:["Leave ","${title}","?"],GROUPS_LEAVE_WARNING:['Do you really want to leave the group "',"${title}",'?"'],GROUPS_LEAVE_WARNING_LAST_MEMBER:['Do you really want to leave the group "',"${title}",'"? Because you are the last person in this group, the group will be deleted if you leave.'],GROUPS_LEAVE_WARNING_ADMIN:['Do you really want to leave the group "',"${title}",'"? If you are the last administrator in this group, the longest serving member will be promoted to administrator after you leave.'],GROUPS_LEAVE_WARNING_REMOVE_PHOTOS:["<div class='checkbox-prompt'><label><input type=\"checkbox\">Also remove all the photos & videos you have added to the group pool?</input></label></div>"],GROUPS_LEAVE_WARNING_LEAVE_BUTTON:["Leave this group"],GROUPS_LEAVE_WARNING_CANCEL_BUTTON:["Cancel"],EMPTY_BLAST:["There's no admin blast."],ADD_BLAST:["Why don't you add one?"],REMOVING_BLAST:["Removing Blast..."],CREATE_BLAST:["Add Group Admin Blast"],BACK_TO_OVERVIEW:["Back to group overview"],GROUP_POOL:["Group pool"],NO_VISIBLE_PHOTOS:["${screenname}"," doesn't have any photos visible to you in the ","${groupTitle}"," pool."],UPDATE_BLAST_ERROR:["Could not update the group blast at this time"],DELETE_BLAST_ERROR:["Could not delete the group blast at this time"],LONG_BLAST_ERROR:[{type:"plural",valueName:"count",options:{one:"Group blast is ${#} character, it must be less than 496 characters.",other:"Group blast is ${#} characters, it must be less than 496 characters."}}],GROUPS_LIST_BELONG_HEADER:["Groups you are a member of"],GROUPS_LIST_BELONG_MORE:["View all groups you are a member of"],PENDING:[{type:"plural",valueName:"count",options:{one:"${#} pending",other:"${#} pending"}}],GROUPS_ADMIN:["Groups you administer"],GROUPS_MODERATED:["Groups you moderate"],GROUPS_BELONG:["Groups you are a member of"],GROUPS_FAVED:["Groups you faved"],VIEW_ALL_GROUPS_ADMIN:["View all groups you administer"],VIEW_ALL_GROUPS_MODERATED:["View all groups you moderate"],GROUP_DESCRIPTION:["Group Description"],GROUP_RULES:["Group Rules"],GROUP_ADDITIONAL_INFO:["Additional Info"],PENDING_MEMBER_COUNT_NOTIFICATION:['You have <a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0 pending members",one:"${#} pending member",other:"${#} pending members"}},"</a>"],BLAST_DATE_ADDED:[{type:"date",valueName:"blastDateAdded",format:"long"}],GROUP_DISCUSSION_START:["Start a discussion"],GROUP_DISCUSSION_DELETE_REPLY:["Delete reply"],GROUP_DISCUSSION_CONFIRM_DELETE:["Are you sure you want to delete this reply?"],GROUP_DISCUSSION_DELETE:["Delete"],GROUP_DISCUSSION_DELETE_FAILED:["Failed to delete reply, please try again."],GROUP_DISCUSSION_PUBLISH_FAILED:["Failed to post reply, please try again."],GROUP_DISCUSSION_PUBLISH_REPLY:["Post reply"],GROUP_DISCUSSION_RECENT_DISCUSSIONS:["Discussions"],GROUP_DISCUSSION_POST_REPLY:["Post reply"],GROUP_DISCUSSION_PUBLISH:["Post Reply"],GROUP_DISCUSSION_PREVIEW:["Preview"],GROUP_DISCUSSION_EDIT_FAILED:["Failed to edit reply, please try again."],GROUP_DISCUSSION_EDIT_REPLY:["Edit reply"],GROUP_DISCUSSION_PREVIEW_EDIT_FAILED:["Failed to preview edit, please try again."],GROUP_DISCUSSION_PREVIEW_EDIT:["Preview edit"],GROUP_DISCUSSION_PREVIEW_REPLY_FAILED:["Failed to preview reply, please try again."],GROUP_DISCUSSION_PREVIEW_REPLY:["Preview reply"],GROUP_DISCUSSION_POST_LOCKED_WITH_LINK:["Group discussion in ","${groupname}",' has been locked. (<a href="',"${unlockUrl}",'">unlock?</a>)'],GROUP_DISCUSSION_POST_LOCKED:["This topic has been locked."],GROUP_DISCUSSION_REPLY_EDITED:["Posted ","${createdAgo}",". Edited ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_WITH_ROLE:["Posted ","${createdAgo}",". Edited by ","${editAuthor}"," (","${editRole}",") ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_BY_STAFF:["Posted ","${createdAgo}",". Edited by ","${editAuthor}"," (Staff) ","${editedAgo}"],GROUP_DISCUSSION_DELETE_TOPIC:["Delete topic"],GROUP_DISCUSSION_CONFIRM_DELETE_TOPIC:["Are you sure you want to delete this topic?"],GROUP_DISCUSSION_STICKY_FAILED:["Failed to mark/unmark this topic as sticky.  Please try again"],GROUP_DISCUSSION_STICKY:["Sticky"],GROUP_DISCUSSION_LOCK_FAILED:["Failed to lock/unlock this topic.  Please try again"],GROUP_DISCUSSION_LOCK:["Lock Topic"],DISCUSSION_REPLY_REPLY_PROMPT:["Click to reply to the reply"],DISCUSSION_REPLY_PERMALINK_PROMPT:["Permalink"],DISCUSSION_REPLY_DELETE_PROMPT:["Click to delete this reply"],DISCUSSION_REPLY_EDIT_PROMPT:["Click to edit this reply"],GROUP_DISCUSSION_LOCK_CONFIRMATION_TITLE:["Lock topic"],GROUP_DISCUSSION_LOCK_CONFIRMATION:["Are you sure you want to lock this topic?"],GROUP_DISCUSSION_LOCK_BUTTON:["Lock"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION_TITLE:["Unlock topic"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION:["Are you sure you want to unlock this topic?"],GROUP_DISCUSSION_UNLOCK_BUTTON:["Unlock"],DISCUSSION_MORE_LINK:["More..."],DISCUSSION_SEARCH_LINK:["Search this group's discussions"],DISCUSSION_FORMAT_REPLY:["Want to format your reply?"],GROUP_DISCUSSION_FORMATTING_TITLE:["Discussion Formatting"],GROUP_DISCUSSION_FORMATTING_CLOSE:["Close"],SIGN_IN_TO_REPLY:["Sign in to reply"],DISCUSSION_SIGN_IN_TO_REPLY:["Sign in to reply!"],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED:["Failed to post reply. This topic has now been locked."],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED_OR_NONMEMBER:["Failed to post reply. This topic is locked or you are not a member of the group."],GROUP_DISCUSSION_PUBLISH_FAILED_DELETED:["Failed to post reply.  This topic has been deleted."],GROUP_DISCUSSION_GROUP_LOCKED:["All discussions are locked for this group"],GROUP_DISCUSSION_GROUP_LOCKED_WITH_LINK:['All discussions are locked for this group (<a title="unlock group discussions?" href="',"${unlockUrl}",'">unlock?</a>)'],CREATED_YEAR:["Since ","${createdYear}"
],UPDATED_TIME_AGO:["Updated ","${updatedAgo}"],GROUP_JOIN:["Join Group"],GROUP_JOIN_SHORT:["Join"],GROUP_JOINED:["Joined"],GROUP_JOIN_REQUESTED:["Join Requested"],GROUP_JOIN_REQUESTED_SHORT:["Pending"],GROUP_LEAVE_GROUP:["Leave Group"],GROUP_LEAVE_GROUP_SHORT:["Leave"],PHOTOS_LINK_LABEL:["Photos"],DISCUSSIONS_LINK_LABEL:["Discussions"],ADMIN_LINK_LABEL:["Administration"],ERROR_LOADING:["There was an error loading this group. Please try again later."],VISIBLE_REPLIES:["(","${from}"," to ","${to}"," of ","${total}"," replies)"],JOIN_GROUP_TO_START_DISCUSSION:["Join the group to start a discussion!"],POOL_PREVIEW:[{type:"plural",valueName:"count",options:{one:"Showing ${#} row",other:"Showing ${#} rows"}}],GROUP_BAN_MEMBER:["Ban Member"],GROUP_BAN_MEMBER_FAILED:["Failed to ban the member at this time.  Please try again."],GROUP_BAN_MEMBER_CONFIRM:["Are you sure you want to ban this member from the group?"],GROUPS_BAN_MEMBER_BUTTON:["Ban Member"],GROUPS_BAN_MEMBER_CANCEL_BUTTON:["Cancel"],GROUP_BAN_MEMBER_SUCCESS:["Member successfuly banned from the group"],GROUP_BAN_MEMBER_FAILED_ALREADY:["Failed to ban the member at this time.  They may have already been banned from the group."],GROUP_MEMBERS_SIGNIN:["Sign in to see the group's members."],GROUP_MEMBERS_ERROR_LOADING:["There was an error loading this group's members. Please try again later."],GROUP_MEMBERS_LOADMORE:["Load more members"],GROUP_LANDING_HEADLINE:["Flickr groups are a great way to share photos, post comments, and hold discussions around a common theme."],GROUP_RECOMMENDED_GET_STARTED:["Get started with these Flickr Groups"],GROUP_RECOMMENDED_JOIN_A_GROUP:["Join a group!"],SIGN_IN_BEFORE_JOIN_TITLE:["You found a group to join!"],SIGN_IN_BEFORE_JOIN_MESSAGE:["That's fantastic. Just sign in to join ","${name}","."],SIGN_UP_AND_JOIN_MESSAGE:["Join Flickr to become a member of ","${name}","."],SIGN_IN_AND_JOIN:["Sign in and join"],SIGN_UP_BEFORE_CREATE_TITLE:["Create a new Flickr Group!"],SIGN_UP_AND_CREATE_MESSAGE:["Join Flickr to create a new group."],GROUPS_SUBNAV_MEMBERS:[{type:"plural",valueName:"count",options:{one:"member",other:"members"}}],GROUPS_SUBNAV_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"discussion",other:"discussions"}}],GROUPS_SUBNAV_PHOTOS:[{type:"plural",valueName:"count",options:{one:"photo",other:"photos"}}],GROUPS_COVER_ATTRIBUTION:["Photo by ","${username}"],GROUPS_BACK_TO_MINE:["Back to my groups"],GROUPS_BACK_TO_OTHERS:["Back to ","${username}"," groups"],GROUPS_FOUNDED:["Founded on ",{type:"date",valueName:"intlDate",format:"long"}],NO_PUBLIC_GROUPS:["This user has not joined any public groups."],RECOMMENDED_GROUPS:["Recommended groups:"],GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS:["No public photos in the group pool"],GROUP_INVITE_ONLY_HEADER:["Membership in ","${groupName}"," is by invitation only."],GROUP_INVITE_ONLY_DESC:["All you need to do is contact the administrator responsible for invitations to let them know you're interested in signing up!"],GROUP_INVITE_ONLY_CONTACT_ADMIN:["Contact the group administrator"],GROUP_INVITE_ONLY_SEND:["Send"],GROUP_INVITE_EMPTY_MESSAGE:["Message is empty."],GROUP_INVITE_PENDING:["Your request to join ","${groupName}"," is still awaiting moderator attention - hang in there!"],GROUP_SLOW:["We're having some trouble displaying this group at the moment. Please try again."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-autosuggest-bar",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div id="autosuggest">\n	<div class="search-icon"></div>\n	<form action="/search/" method="get" role="search">\n		<input type="text" name="q" value="',(o=n.searchTerm)?o=o.call(t,{hash:{},data:i}):(o=t.searchTerm,o=typeof o===u?o.apply(t):o),s+=a(o)+'" id="autosuggest-input" class="yui3-aclist-input" autocomplete="off" aria-label="Search" role="textbox">\n	</form>\n</div>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-bar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-autosuggest-item",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i;return r+=' style="background-image: url(',(i=n.icon)?i=i.call(e,{hash:{},data:t}):(i=e.icon,i=typeof i===u?i.apply(e):i),r+=a(i)+');"',r}function c(e,t){return"<i></i>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="autosuggest-item" data-type="',(o=n.type)?o=o.call(t,{hash:{},data:i}):(o=t.type,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-section="',(o=n.section)?o=o.call(t,{hash:{},data:i}):(o=t.section,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-destination="',(o=n.url)?o=o.call(t,{hash:{},data:i}):(o=t.url,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n	<div class="autosuggest-icon"',o=n["if"].call(t,t.icon,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=">\n		",o=n.unless.call(t,t.icon,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+='\n	</div>\n	<div class="autosuggest-text">\n		<div>',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===u?o.apply(t):o),s+=a(o)+"</div><span>",(o=n.subtitle)?o=o.call(t,{hash:{},data:i}):(o=t.subtitle,o=typeof o===u?o.apply(t):o),s+=a(o)+"</span>\n	</div>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-item",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("autosuggest-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create("autosuggest-view",e.FlickrView,[],{langBundles:this.details.langBundles,START_MATCH_MULTIPLIER:2,MATCH_THRESHOLD:0,MAX_RESULTS_TO_DISPLAY:9,MATCH_DISTANCE_THRESHOLD:.2,MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD:4,COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD:3,initializer:function(e){var t=this.appContext.getViewer();return e.contextWeights?this.contextWeights=e.contextWeights:(this.contextWeights={global_global:{tags:1,people:1,groups:1}},t.signedIn&&(this.contextWeights[t.nsid+"_user"]={people:1,groups:1})),this.searchId=e.searchId,e.defaultSearchScope?this.defaultSearchScope=e.defaultSearchScope:this.searchId?this.defaultSearchScope=null:this.defaultSearchScope={},this.inputNode=null,this.resultItems=[],this},loadState:function(){var t=this;return this.searchId?this.appContext.getModel("search-photos-models",this.searchId).then(function(e){t.searchModel=e}):e.Promise.resolve()},buildContainer:function(){var t,n;return this.searchModel?(n=this.searchModel.getValue("apiParams"),t=n.text||n.tags||""):t="",this.setContainerHTML(this.templates("autosuggest-bar")({searchTerm:e.flutil.unescape(t)})),this},activate:function(){var t=this;return this.getContextModels().then(function(){t.determineContext(),t.defaultSearchScope||(t.defaultSearchScope=t.getSearchScope(t.searchModel.getValue("apiParams"))),t.buildSearchItems()}),this.autoCompleteList=e.use("autocomplete",function(e){t.inputNode=e.one("#autosuggest-input"),t.inputNode.plug(e.Plugin.AutoComplete,{minQueryLength:0,activateFirstItem:t.hasDefaultSearchItem,source:function(){return t.resultItems.concat(t.searchItems)},resultFilters:function(e,n){var r,i,s=0,o=0,u={},a,f,l,c;r=t.buildTokenRegExps(e),i=n.filter(function(n){var i,s,o=n.raw.type===1||e.length<t.MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD,a=e.length<t.COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD;return n.raw.isSearchItem?!0:(i=n.raw.matches.reduce(function(e,n){return e+n.weight*t.maxMatch(r,n.token,o,a)},0),n.matchScore=i/n.raw.matches.length,s=e.length?i>t.MATCH_THRESHOLD:!0,s&&(u[n.raw.type]=u[n.raw.type]||0,u[n.raw.type]++),s)});for(f=0,l=t.searchItems.length;f<l;f++)c=t.searchItems[f].resultType,u[c]?t.searchItems[f].section=t.searchItems[f].startSection:t.searchItems[f].section=t.searchItems[f].endSection;return i=i.sort(function(e,n){var r=e.raw.section-n.raw.section,i;if(r===0)return e.raw.isSearchItem?-1:n.raw.isSearchItem?1:(i=n.matchScore-e.matchScore,Math.abs(i)<t.MATCH_DISTANCE_THRESHOLD?n.raw.score-e.raw.score:i);return r}),a=t.allocateTypeCounts(u,t.MAX_RESULTS_TO_DISPLAY),i=i.filter(function(e){return e.raw.isSearchItem?!0:(e.raw.type===o?s++:(o=e.raw.type,s=1),s<=a[o])}),i},resultFormatter:function(e,n){return n.map(function(e){var n;return e.raw.type===2?e.raw.members===1?n=t.intlMessage({intlName:"autosuggest.MEMBER"}):n=t.intlMessage({intlName:"autosuggest.MEMBERS",count:e.raw.members}):n=e.raw.subtitle||"",t.templates("autosuggest-item")({title:e.raw.title,subtitle:n,type:["tag","people","group","button-people","button-group"][e.raw.type],section:e.raw.section,icon:e.raw.type===0||e.raw.isSearchItem?"":t.buildIconURL(e.raw)})})},resultTextLocator:function(e){return e.isSearchItem?t.get("container").one("#autosuggest-input").get("value"):e.title}}),t.registerEventHandler(t.inputNode.on("focus",function(){e.rapidTracker.beacon(t.name,"autosuggestInputFocus"),t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.registerEventHandler(t.inputNode.on("click",function(){t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.inputNode.ac.after("query",function(){var e=t.get("container").one(".autosuggest-item");t.get("container").all(".autosuggest-item").each(function(t){var n;e.getAttribute("data-section")!==t.getAttribute("data-section")&&e.get("parentNode").addClass("separator"),e=t,n=t.getAttribute("data-type"),(n==="tag"||n==="button-group"||n==="button-people")&&t.get("parentNode").setAttribute("data-is-short","true")})}),t.inputNode.ac.on("select",function(e){var n=t.itemSelected(e.result);e.originEvent.stopImmediatePropagation(),n||(t.inputNode.focus(),e.halt())}),t.registerEventHandler(t.inputNode.on("keydown",function(n){var r=t.inputNode.get("value");n.keyCode===13&&(n.halt(),r&&(e.rapidTracker.beacon(t.name,"autosuggestEnterKeydown"),t.close(),t.itemSelected(r)))})),t.registerEventHandler(t.get("container").one(".search-icon").on("click",function(n){var r=t.inputNode.get("value");r&&(e.rapidTracker.beacon(t.name,"autosuggestSearchIconClick"),t.itemSelected(r))}))}),this},close:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.hide()},itemSelected:function(t){var n,r,i,s=this.searchModel&&e.merge(this.searchModel.getValue("apiParams"))||{};if(typeof t=="string"||!t.raw.isSearchItem&&t.raw.type===0)r="/search?",delete s.text,delete s.tags,typeof t=="string"?s.text=t:(s.text=t.raw.title,e.rapidTracker.beacon(this.name,"autosuggestSuggestedPhotoSearchSelect")),s=e.merge(this.clearParamsExceptSearchScope(s),this.defaultSearchScope);else{if(!t.raw.isSearchItem)return s={},t.raw.pathalias?n=t.raw.pathalias:n=t.raw.nsid,t.raw.type===1?(r="/photos/"+n,e.rapidTracker.beacon(this.name,"autosuggestPersonSelect")):t.raw.type===2&&(r="/groups/"+n,e.rapidTracker.beacon(this.name,"autosuggestGroupSelect")),this.classicNavigate(r),!0;i=this.get("container").one("#autosuggest-input").get("value");if(!i)return e.rapidTracker.beacon(this.name,"autosuggestSearchButtonItemSelectEmpty"),!1;if(t.raw.searchScope==="people")return e.rapidTracker.beacon(this.name,"autosuggestPeopleSearchItemSelect"),r="/search/people/?",s={q:i},this.classicNavigate(r+e.QueryString.stringify(s)),!0;if(t.raw.searchScope==="groups")return e.rapidTracker.beacon(this.name,"autosuggestGroupsSearchItemSelect"),r="/search/groups/?",s={q:i},this.classicNavigate
(r+e.QueryString.stringify(s)),!0;t.raw.isDefault?e.rapidTracker.beacon(this.name,"autosuggestDefaultPhotoSearchItemSelect"):e.rapidTracker.beacon(this.name,"autosuggestOtherPhotoSearchItemSelect"),r="/search?",s.text=i,s=this.clearParamsExceptSearchScope(s),s=e.merge(s,t.raw.searchScope)}return e.SearchHelper.clearAdvancedSearchParams(s),this.appContext.flapp.navigate(r+e.QueryString.stringify(s)),!0},determineContext:function(){var e={},t=this.appContext.getViewer();this.searchModel?(e.global_global={people:1,groups:1},t.signedIn&&(e[t.nsid+"_user"]={people:1,groups:1}),this.groupInfo?e[this.groupInfo.nsid+"_group"]={tags:1,people:1,groups:1}:this.personInfo?e[this.personInfo.nsid+"_user"]={tags:1,people:1,groups:1}:(t.signedIn&&(e[t.nsid+"_user"]={tags:1,people:1,groups:1}),e.global_global={tags:1,people:1,groups:1})):e=this.contextWeights,this.setWeights(e)},clearParamsExceptSearchScope:function(e){return delete e.user_id,delete e.group_id,delete e.contacts,delete e.faves,e},getSearchScope:function(e){var t=["user_id","group_id","contacts","faves"],n,r,i={};for(n=0,r=t.length;n<r;n++)e[t[n]]&&(i[t[n]]=e[t[n]]);return i},buildSearchItems:function(){var e;this.appContext.flipper.isFlipped("autosuggest-B")?(this.searchItems=[{type:3,title:this.intlMessage({intlName:"autosuggest.SEARCH_PEOPLE"}),searchScope:"people",isSearchItem:!0,resultType:1,startSection:4,endSection:6},{type:4,title:this.intlMessage({intlName:"autosuggest.SEARCH_GROUPS"}),searchScope:"groups",isSearchItem:!0,resultType:2,startSection:5,endSection:7}],this.appContext.getViewer().signedIn&&(e=this.defaultSearchScope.contacts==="all"&&Object.keys(this.defaultSearchScope).length===1,this.hasDefaultSearchItem=this.hasDefaultSearchItem||e,this.searchItems.push({type:0,title:this.intlMessage({intlName:"autosuggest.SEARCH_CONTACTS_PHOTOS"}),searchScope:{contacts:"all"},isSearchItem:!0,resultType:0,startSection:e?0:3,endSection:e?0:3,isDefault:e}),e=this.defaultSearchScope.user_id===this.appContext.getViewer().nsid&&Object.keys(this.defaultSearchScope).length===1,this.hasDefaultSearchItem=this.hasDefaultSearchItem||e,this.searchItems.push({type:0,title:this.intlMessage({intlName:"autosuggest.SEARCH_YOUR_PHOTOS"}),searchScope:{user_id:this.appContext.getViewer().nsid},isSearchItem:!0,resultType:0,startSection:e?0:2,endSection:e?0:2,isDefault:e})),this.defaultSearchScope.user_id&&Object.keys(this.defaultSearchScope).length===1&&this.defaultSearchScope.user_id!==this.appContext.getViewer().nsid?(this.hasDefaultSearchItem=!0,this.searchItems.push({type:0,title:this.intlMessage({intlName:"autosuggest.SEARCH_USER_PHOTOS",name:this.personInfo.name}),searchScope:this.defaultSearchScope,isSearchItem:!0,resultType:0,startSection:0,endSection:0,isDefault:!0})):this.defaultSearchScope.group_id&&Object.keys(this.defaultSearchScope).length===1&&(this.hasDefaultSearchItem=!0,this.searchItems.push({type:0,title:this.intlMessage({intlName:"autosuggest.SEARCH_GROUP_PHOTOS",name:this.groupInfo.name}),searchScope:this.defaultSearchScope,isSearchItem:!0,resultType:0,startSection:0,endSection:0,isDefault:!0})),e=Object.keys(this.defaultSearchScope).length===0,this.hasDefaultSearchItem=this.hasDefaultSearchItem||e,this.searchItems.push({type:0,title:this.intlMessage({intlName:"autosuggest.SEARCH_EVERYONES_PHOTOS"}),searchScope:{},isSearchItem:!0,resultType:0,startSection:e?0:1,endSection:e?0:1,isDefault:e}),this.sectionMap={0:"0",1:"4",2:"5"},this.inputNode&&this.inputNode.ac.set("activateFirstItem",this.hasDefaultSearchItem)):(this.searchItems=[{type:3,title:this.intlMessage({intlName:"autosuggest.SEARCH_PEOPLE"}),searchScope:"people",isSearchItem:!0,resultType:1,startSection:1,endSection:3},{type:4,title:this.intlMessage({intlName:"autosuggest.SEARCH_GROUPS"}),searchScope:"groups",isSearchItem:!0,resultType:2,startSection:2,endSection:4}],this.sectionMap={0:"0",1:"1",2:"2"})},getContextModels:function(){var n=this,r,i,s=null,o=null;return this.searchModel?(r=this.searchModel.getValue("apiParams"),r.group_id?(i={},t.nsid(r.group_id)?i.id=r.group_id:i.pathAlias=r.group_id,s=n.appContext.getModel("group-pool-models",i)):s=e.Promise.resolve(),r.user_id?(i={},t.nsid(r.user_id)?i.id=r.user_id:i.pathAlias=r.user_id,o=n.appContext.getModel("person-models",i)):o=e.Promise.resolve(),e.Promise.all([s,o]).then(function(e){e[0]&&(n.groupInfo={name:e[0].getValue("group").getValue("title"),nsid:e[0].id}),e[1]&&(n.personInfo={name:e[1].getValue("displayname"),nsid:e[1].getValue("nsid")})})):e.Promise.resolve()},classicNavigate:function(t){window.location=e.url(t)},buildIconURL:function(t){return e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver)},buildTokenRegExps:function(t){var n=[],r,i,s,o,u=t.split(" ").map(e.Text.AccentFold.fold.bind(e.Text.AccentFold));for(r=0,i=u.length;r<i;r++)s=u[r],s&&(o=this.escapeForRegExp(s),n.push({re:new RegExp(o,"i"),numChars:s.length}));return n},escapeForRegExp:function(e){return e=decodeURIComponent(e),e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/\?/g,"\\?").replace(/\|/g,"\\|").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]")},maxMatch:function(e,t,n,r,i){var s=this,o=t.length,u;return u=e.map(function(e){var r=t.match(e.re),u=0,a;return r&&(a=r.index===0,i?u=1:u=e.numChars/o,n&&!a&&(u=0),a&&(u*=s.START_MATCH_MULTIPLIER)),u}),u.length?Math.max.apply(Math,u):0},allocateTypeCounts:function(e,t){var n=Object.keys(e),r=n.length,i={},s,o=n.reduce(function(t,n){return t+e[n]},0),u=0,a,f;t=Math.min(t,o),s=Math.floor(t/n.length);for(a=0;a<r;a++)f=n[a],s<=e[f]?i[f]=s:i[f]=e[f],u+=i[f];if(u===t)return i;a=0;while(u<t)a%=r,f=n[a],e[f]>i[f]&&(i[f]++,u++),a++;return i},setWeights:function(e){var t=this,n,r=[];this.contextWeights=e;for(n in this.contextWeights)this.appContext.getModel("autosuggest-context-results-models",n).then(function(e){r.push(e),t.computeResultItems(r),t.inputNode&&t.
inputNode.ac&&t.inputNode.test(":focus")&&t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})},computeResultItems:function(t){var n=this,r={},i=[],s,o,u,a,f;for(s=0,o=t.length;s<o;s++)u=t[s],a=this.contextWeights[u.id],["tags","people","groups"].forEach(function(t){var i=u.getValue(t),s=a[t],o,f,l;if(!s)return;for(o=0,f=i.length;o<f;o++)l=i[o],r[l.key]||(r[l.key]=e.merge(l),r[l.key].score=0),r[l.key].score+=l.score*s,r[l.key].section=n.sectionMap[l.type]});for(f in r)i.push(r[f]);return this.resultItems=i,i},destructor:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.destroy(!0)}})},"@VERSION@",{requires:["flickr-promise","flickr-view","flutil","url","autosuggest-css","text-accentfold","url-helper","autosuggest-context-results-models","hermes-template-autosuggest-bar","hermes-template-autosuggest-item"],langBundles:["autosuggest"]});
YUI.add("search-bar-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("search-bar-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n=null;return this.searchId=t.searchId,this.searchTerm=t.searchTerm,YUI.Env.isServer||(n=e.QueryString.parse(t.searchId||"")),!this.searchTerm&&n&&(this.searchTerm=n.text||n.tags||""),this},loadState:function(){var t=this,n=this.appContext.getViewer(),r;return this.searchId?(n.signedIn?r=e.Promise.all([this.appContext.getModel("search-photos-models",this.searchId),this.appContext.getModel("person-preferences-models",n.nsid)]):r=e.Promise.all([this.appContext.getModel("search-photos-models",this.searchId)]),r.then(function(e){t.searchModel=e[0],e[1]&&(t.personPreferencesModel=e[1])}),r):e.Promise.resolve()},buildContainer:function(){var t=this.templates("autosuggest-bar")({searchTerm:this.searchTerm?e.flutil.unescape(this.searchTerm):""});return this.setContainerHTML(t),this},activate:function(){var t=this;return t.inputNode=e.one("#autosuggest-input"),t.registerEventHandler(t.inputNode.on("keydown",function(n){var r=t.inputNode.get("value");n.keyCode===13&&(n.halt(),r&&(e.rapidTracker.beacon(t.name,"autosuggestEnterKeydown"),t.itemSelected(r)))})),t.registerEventHandler(t.get("container").one(".search-icon").on("click",function(n){var r=t.inputNode.get("value");r&&(e.rapidTracker.beacon(t.name,"autosuggestSearchIconClick"),t.itemSelected(r))})),this},itemSelected:function(t){var n,r,i,s=this.searchModel&&e.merge(this.searchModel.getValue("apiParams"))||{};this.fire("subviewViewEvent","dirty"),delete s.page;if(typeof t!="string"&&t.raw.type!==0){if(t.raw.isSearchItem){i=this.get("container").one("#autosuggest-input").get("value"),s={q:i},t.raw.context==="people"?r="/search/people/?":t.raw.context==="groups"&&(r="/search/groups/?"),this.classicNavigate(r+e.QueryString.stringify(s));return}s={},t.raw.pathalias?n=t.raw.pathalias:n=t.raw.nsid,t.raw.type===1?(r="/photos/"+n,e.rapidTracker.beacon(this.name,"autosuggestPersonSelect")):t.raw.type===2&&(r="/groups/"+n,e.rapidTracker.beacon(this.name,"autosuggestGroupSelect")),this.classicNavigate(r);return}r="/search?",delete s.q,delete s.text,delete s.tags,typeof t=="string"?s.text=t:(s.tags=t.raw.title,e.rapidTracker.beacon(this.name,"autosuggestTagSelect")),this.defaultContext&&(delete ["user_id"],delete ["group_id"],this.defaultContextType==="user"?s.user_id=this.defaultContext:this.defaultContextType==="group"&&(s.group_id=this.defaultContext)),e.SearchHelper.clearAdvancedSearchParams(s),e.SearchHelper.addParamDefaults(s,this.personPreferencesModel),this.appContext.flapp.navigate(r+e.QueryString.stringify(s))},classicNavigate:function(t){window.location=e.url(t)},destructor:function(){}})},"@VERSION@",{requires:["flickr-promise","flickr-view","flutil","autosuggest-css","hermes-template-autosuggest-bar","search-helper","url"],langBundles:["autosuggest"]});
YUI.add("hermes-template-notifications-menu",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;r+='\n	<div class="c-notifications-menu">\n		<span class="c-notification-icon"></span>\n		',s=n["if"].call(e,(i=e.user,i==null||i===!1?i:i.unreadNotificationCount),{hash:{},inverse:l.noop,fn:l.program(2,h,t),data:t});if(s||s===0)r+=s;return r+="\n	</div>\n",r}function h(e,t){var n="",r;return n+='\n		<span class="c-notification-unreadcount">'+f((r=(r=e.user,r==null||r===!1?r:r.unreadNotificationCount),typeof r===a?r.apply(e):r))+"</span>\n		",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this;u=n["if"].call(t,(o=t.user,o==null||o===!1?o:o.signedIn),{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(u||u===0)s+=u;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notifications-menu",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("notifications-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("notifications-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){if(!YUI.Env.isServer&&this.get("container").get("innerHTML")===""){var t=this.templates("notifications-menu")({user:this.appContext.getViewer()});this.setContainerHTML(t)}return this},loadState:function(){var t=this,n=this.appContext.getViewer();return n.signedIn?(t.set("user",{signedIn:!0}),this.appContext.getModel("person-notifications-models",n.nsid).then(function(r){var i=r.toJSON();t.set("personNotificationsModel",r);if(!YUI.Env.isServer)return r.registry.remote.readUnreadNotificationCount({id:n.nsid},t.appContext).then(function(){i=r.toJSON(),t.set("user",e.merge(t.get("user"),i))});t.set("user",e.merge(t.get("user"),i))})):(t.set("user",{signedIn:!1}),e.Promise.resolve())},buildContainer:function(){var e=this.templates("notifications-menu")({user:this.get("user")});return this.setContainerHTML(e),this},activate:function(){setTimeout(function(){this.get("container").on("mouseenter",this.openMenu,this),this.get("container").on("touchstart",this.openMenu,this)}.bind(this),350),this.get("container").on("click",this.openMenu,this)},openMenu:function(){var e=this.get("personNotificationsModel"),t=this.get("container").one(".c-notification-unreadcount");t&&(t.addClass("viewed"),e.registry.remote.updateUnreadNotificationCount({},this.appContext),e.setValue("unreadNotificationCount",0))},closeMenu:function(){},destructor:function(){}})},"@VERSION@",{requires:["flickr-view","notifications-menu-css","hermes-template-notifications-menu"],langBundles:["notifications-menu","common"]});
YUI.add("hermes-lang-notifications-menu",function(e,t){e.Intl.add("hermes/notifications-menu","en-US",{})},"@VERSION@",{requires:["intl"]});
