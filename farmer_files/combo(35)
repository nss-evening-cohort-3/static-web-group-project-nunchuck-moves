YUI.add("photo-privacy-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},update:function(t,n){var r;return r={photo_id:t,is_public:this.getValue(t,"isPublic"),is_friend:this.getValue(t,"isVisibleByFriends"),is_family:this.getValue(t,"isVisibleByFamily"),perm_addmeta:this.getValue(t,"permAddMeta"),perm_comment:this.getValue(t,"permComment")},e.ModelUpdaters["flickr-photos-setPerms"].run(r,this.appContext)},batchUpdate:function(t,n){var r;switch(!0){case"privacy"in n&&"commenting"in n&&"addMeta"in n:r={photo_ids:t,is_public:n.privacy.isPublic,is_friend:n.privacy.isVisibleByFriends,is_family:n.privacy.isVisibleByFamily,perm_addmeta:n.addMeta,perm_comment:n.commenting};break;case"privacy"in n&&"commenting"in n:r={photo_ids:t,is_public:n.privacy.isPublic,is_friend:n.privacy.isVisibleByFriends,is_family:n.privacy.isVisibleByFamily,perm_comment:n.commenting};break;case"privacy"in n&&"addMeta"in n:r={photo_ids:t,is_public:n.privacy.isPublic,is_friend:n.privacy.isVisibleByFriends,is_family:n.privacy.isVisibleByFamily,perm_addmeta:n.addMeta};break;case"commenting"in n&&"addMeta"in n:r={photo_ids:t,perm_addmeta:n.addMeta,perm_comment:n.commenting};break;case"privacy"in n:r={photo_ids:t,is_public:n.privacy.isPublic,is_friend:n.privacy.isVisibleByFriends,is_family:n.privacy.isVisibleByFamily};break;case"commenting"in n:r={photo_ids:t,perm_comment:n.commenting};break;case"addMeta"in n:r={photo_ids:t,perm_addmeta:n.addMeta}}return r.full_response=1,e.ModelUpdaters["flickr-photos-setPerms"].run(r,this.appContext)}},attributes:{isPublic:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFriends:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFamily:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},permAddMeta:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},permComment:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-getPerms-fetcher","flickr-photos-setPerms-updater","attribute-helpers"]});
YUI.add("flickr-photos-getPerms-fetcher",function(e,t){"use strict";function n(e,t){var n=e[0],r=e[1],i;i={id:t.id,isPublic:n.perms.ispublic,isVisibleByFriends:n.perms.isfriend,isVisibleByFamily:n.perms.isfamily,permAddMeta:n.perms.permaddmeta,permComment:n.perms.permcomment},r.addOrUpdate(i)}function r(n,r){var i=n.id,s={photo_id:i},o=this;return e.Promise.all([r.callAPI("flickr.photos.getPerms",s),r.getModelRegistry("photo-privacy-models")]).then(function(e){return o._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-photos-getPerms"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-privacy-models"]});
